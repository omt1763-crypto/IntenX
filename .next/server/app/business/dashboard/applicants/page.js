(()=>{var e={};e.id=6413,e.ids=[6413],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},94500:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=t(67096),r=t(16132),l=t(37284),n=t.n(l),i=t(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["business",{children:["dashboard",{children:["applicants",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,52017)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\business\\dashboard\\applicants\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,21606)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\business\\dashboard\\applicants\\page.tsx"],p="/business/dashboard/applicants/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/business/dashboard/applicants/page",pathname:"/business/dashboard/applicants",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7977:(e,s,t)=>{Promise.resolve().then(t.bind(t,4630))},4630:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>BusinessApplicantsPage});var a=t(30784),r=t(9885),l=t(57114),n=t(53306),i=t(27912),o=t(98607),d=t(81547),c=t(49384),p=t(3861),x=t(61147),u=t(99452),m=t(76053),h=t(29769),b=t(26753);function BusinessApplicantsPage(){let e=(0,l.useRouter)(),{user:s,isAuthenticated:t}=(0,n.useAuth)(),{isOpen:g}=(0,i.useSidebar)(),[j,f]=(0,r.useState)([]),[v,w]=(0,r.useState)([]),[N,y]=(0,r.useState)(!0),[_,C]=(0,r.useState)(!1),[A,S]=(0,r.useState)(new Set),[P,Z]=(0,r.useState)(""),[D,L]=(0,r.useState)(""),B=s?.id;(0,r.useEffect)(()=>{C(!0),B&&t?loadApplicants():_&&!t&&e.push("/auth/login")},[B,t,_]);let loadApplicants=async()=>{try{if(!B)return;console.log("[BusinessApplicants] Loading applicants for company:",B);let e=await fetch(`/api/get-applicants?recruiterId=${B}`),s=await e.json();if(console.log("[BusinessApplicants] Applicants API response:",s),s.data&&Array.isArray(s.data)){console.log("[BusinessApplicants] Found",s.data.length,"applicants"),f(s.data);let e=groupApplicantsByJob(s.data);console.log("[BusinessApplicants] Grouped by job:",e),w(e),S(new Set(e.map(e=>e.job.id))),console.log("[BusinessApplicants] Applicants loaded:",s.data.length)}}catch(e){console.error("[BusinessApplicants] Error loading applicants:",e)}finally{y(!1)}},groupApplicantsByJob=e=>{let s={};e.forEach(e=>{let t=e.job_id;s[t]||(s[t]={job:{id:e.jobs?.id||t,title:e.jobs?.title||"Unknown Job",company:e.jobs?.company||"Unknown Company"},applicants:[],expanded:!0}),s[t].applicants.push(e)});let t=Object.values(s).sort((e,s)=>e.job.title.localeCompare(s.job.title));return t},toggleJobExpand=e=>{let s=new Set(A);s.has(e)?s.delete(e):s.add(e),S(s)},getStatusBadgeColor=e=>{switch(e?.toLowerCase()){case"completed":case"interviewed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"shortlisted":return"bg-purple-100 text-purple-800";case"applied":case"reviewing":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}},getStatusIcon=e=>{switch(e?.toLowerCase()){case"completed":case"interviewed":return a.jsx(d.Z,{className:"w-5 h-5 text-green-600"});case"in-progress":return a.jsx(c.Z,{className:"w-5 h-5 text-blue-600"});case"rejected":return a.jsx(p.Z,{className:"w-5 h-5 text-red-600"});default:return a.jsx(c.Z,{className:"w-5 h-5 text-yellow-600"})}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),getInterviewedCount=e=>e.applicants.filter(e=>e.status?.toLowerCase()==="interviewed"||e.status?.toLowerCase()==="completed").length;if(!_||!t)return null;let k=(()=>{let e={completed:0,"in-progress":0,rejected:0,pending:0};return j.forEach(s=>{let t=s.status?.toLowerCase();"completed"===t||"interviewed"===t?e.completed++:"in-progress"===t?e["in-progress"]++:"rejected"===t?e.rejected++:e.pending++}),e})(),q=v.map(e=>({...e,applicants:e.applicants.filter(e=>{let s=e.name.toLowerCase().includes(P.toLowerCase())||e.email.toLowerCase().includes(P.toLowerCase()),t=!D||e.status?.toLowerCase()===D.toLowerCase();return s&&t})})).filter(e=>e.applicants.length>0);return(0,a.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[a.jsx(o.Z,{role:"company"}),(0,a.jsxs)("div",{className:`flex-1 overflow-auto transition-all duration-300 ${g?"ml-64":"ml-20"}`,children:[a.jsx("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("button",{onClick:()=>e.push("/business/dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-all hover:scale-110 duration-200",children:a.jsx(x.Z,{className:"w-6 h-6 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#007a78] to-[#11cd68] bg-clip-text text-transparent flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-[#11cd68]/20 to-[#007a78]/20 rounded-lg",children:a.jsx(u.Z,{className:"w-8 h-8 text-[#007a78]"})}),"Applicants"]}),(0,a.jsxs)("p",{className:"text-slate-600 mt-2",children:[v.reduce((e,s)=>e+s.applicants.length,0)," total candidates across ",v.length," job",1!==v.length?"s":""]})]})]}),j.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Interviewed"}),a.jsx("p",{className:"text-2xl font-bold text-green-700",children:k.completed})]}),a.jsx(d.Z,{className:"w-8 h-8 text-green-600 opacity-30"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:k["in-progress"]})]}),a.jsx(c.Z,{className:"w-8 h-8 text-blue-600 opacity-30"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Shortlisted"}),a.jsx("p",{className:"text-2xl font-bold text-purple-700",children:k.pending})]}),a.jsx(m.Z,{className:"w-8 h-8 text-purple-600 opacity-30"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-bold text-red-700",children:k.rejected})]}),a.jsx(p.Z,{className:"w-8 h-8 text-red-600 opacity-30"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:P,onChange:e=>Z(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#007a78] focus:border-transparent transition-all"})]}),(0,a.jsxs)("select",{value:D,onChange:e=>L(e.target.value),className:"px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#007a78] focus:border-transparent transition-all cursor-pointer",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"interviewed",children:"Interviewed"}),a.jsx("option",{value:"shortlisted",children:"Shortlisted"}),a.jsx("option",{value:"applied",children:"Applied"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),a.jsx("div",{className:"p-6 space-y-6",children:N?a.jsx("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(c.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4 animate-spin"}),a.jsx("p",{className:"text-slate-600 text-lg",children:"Loading applicants..."})]})}):0===q.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg p-12 text-center border border-slate-200",children:[a.jsx(u.Z,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 text-lg",children:"No applicants found"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Applicants will appear here once candidates apply to your jobs"})]}):q.map(s=>(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,a.jsxs)("button",{onClick:()=>toggleJobExpand(s.job.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50 transition-colors border-b border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 text-left",children:[a.jsx(b.Z,{className:"w-6 h-6 text-[#007a78]"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:s.job.title}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[s.applicants.length," applicant",1!==s.applicants.length?"s":""," • ",getInterviewedCount(s)," interviewed"]})]})]}),a.jsx("div",{className:"text-slate-400",children:A.has(s.job.id)?"▼":"▶"})]}),A.has(s.job.id)&&a.jsx("div",{className:"divide-y divide-slate-100",children:s.applicants.map(s=>(0,a.jsxs)("div",{onClick:()=>e.push(`/business/dashboard/applicants/${s.id}`),className:"px-6 py-4 hover:bg-slate-50 transition-colors cursor-pointer border-l-4 border-transparent hover:border-[#11cd68]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#007a78] to-[#11cd68] flex items-center justify-center text-white font-semibold text-sm",children:s.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-slate-900",children:s.name}),a.jsx("p",{className:"text-sm text-slate-600 truncate",children:s.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${getStatusBadgeColor(s.status)}`,children:s.status||"Applied"}),getStatusIcon(s.status)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-600 ml-13",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCCB ",s.position_applied||"Position not specified"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCC5 ",formatDate(s.created_at)]})]})]},s.id))})]},s.job.id))})]})]})}},52017:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var a=t(95153);let r=(0,a.createProxy)(String.raw`C:\Users\omt91\Downloads\main\interviewverse_frontend\app\business\dashboard\applicants\page.tsx`),{__esModule:l,$$typeof:n}=r,i=r.default,o=i}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[6977,8025,2322,5007,8517,5098,2012,8607],()=>__webpack_exec__(94500));module.exports=t})();