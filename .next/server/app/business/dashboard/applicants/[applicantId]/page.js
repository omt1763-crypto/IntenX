(()=>{var e={};e.id=6170,e.ids=[6170],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},97652:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=s(67096),n=s(16132),l=s(37284),i=s.n(l),r=s(32564),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);s.d(t,o);let d=["",{children:["business",{children:["dashboard",{children:["applicants",{children:["[applicantId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,87534)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\business\\dashboard\\applicants\\[applicantId]\\page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,21606)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\business\\dashboard\\applicants\\[applicantId]\\page.tsx"],m="/business/dashboard/applicants/[applicantId]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/business/dashboard/applicants/[applicantId]/page",pathname:"/business/dashboard/applicants/[applicantId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55183:(e,t,s)=>{Promise.resolve().then(s.bind(s,56716))},56716:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ApplicantDetailPage});var a=s(30784),n=s(9885),l=s(57114),i=s(53306),r=s(98607),o=s(47573),d=s(3285),c=s(5805),m=s(49384);function ApplicantDetailPage(){var e,t;(0,l.useRouter)();let s=(0,l.useParams)(),{user:p,isAuthenticated:x}=(0,i.useAuth)(),[h,u]=(0,n.useState)(null),[g,b]=(0,n.useState)(!0),[v,j]=(0,n.useState)(!1),[w,f]=(0,n.useState)(null),[N,y]=(0,n.useState)(!1),A=s?.applicantId,_=p?.id;(0,n.useEffect)(()=>{j(!0),console.log("[ApplicantDetail] Mounted with params:",s),A&&_&&x&&(console.log("[ApplicantDetail] Loading interview for applicantId:",A),loadInterviewData())},[A,_,x]);let loadInterviewData=async()=>{try{let e=await fetch(`/api/interview-detail?applicantId=${A}`),t=await e.json();t.data?(u(t.data),y(!1),t.data.analysis?(f(t.data.analysis),console.log("[ApplicantDetail] Using stored AI analysis:",t.data.analysis)):(generateAssessment(t.data),console.log("[ApplicantDetail] No AI analysis found, generating assessment...")),console.log("[ApplicantDetail] Interview loaded:",t.data)):t.error&&(console.warn("[ApplicantDetail] No interview found:",t.error),y(!0),u(null))}catch(e){console.error("[ApplicantDetail] Error loading interview:",e),y(!0)}finally{b(!1)}},generateAssessment=e=>{e.conversation?.length;let t=e.skills?.length||0;e.duration;let s=0,a=0,n=0,l=e.conversation?.filter(e=>"user"===e.role)||[],i=e.conversation?.filter(e=>"ai"===e.role||"assistant"===e.role)||[];console.log("[Assessment] User messages:",l.length,"AI messages:",i.length),l.length>8?a=80:l.length>5?a=60:l.length>2?a=40:l.length>0&&(a=20);let r=l.reduce((e,t)=>e+(t.content?.length||0),0)/Math.max(l.length,1);r>200?s=70:r>100?s=50:r>50?s=30:l.length>0&&(s=15),t>5?n=75:t>3?n=55:t>1?n=35:t>0&&(n=20);let o=Math.round((s+a+n)/3);f({jobSuitability:o,relevantAccomplishments:s,driveInitiative:a,problemSolving:n,cultureScopes:30,leadershipInfluence:25,userMessageCount:l.length,skillsCount:t,avgResponseLength:Math.round(r),summary:generateSummary(l.length,e),recommendation:o>50?"Consider for Interview":"Do Not Hire"})},generateSummary=(e,t)=>0===e?"Candidate ended interview immediately without engaging, demonstrating very low motivation and questionable professionalism.":e<3?"Candidate showed minimal engagement during the interview with very few responses. Limited information available to assess job-related competencies.":e<5?"Candidate demonstrated moderate engagement during the interview. Some substantive responses provided but needs further evaluation.":e<8?"Candidate demonstrated good engagement throughout the interview with multiple thoughtful responses. Shows competency in several areas.":"Candidate demonstrated strong engagement with consistent, detailed responses throughout the interview. Showed good understanding of role requirements and strong communication skills.",updateApplicantStatus=async e=>{if(A)try{b(!0);let t=await fetch("/api/applicants",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantId:A,status:e})}),s=await t.json();t.ok?(console.log("[ApplicantDetail] Status updated to",e,s.applicant),await loadInterviewData()):console.error("[ApplicantDetail] Failed to update status",s)}catch(e){console.error("[ApplicantDetail] Error updating status:",e)}finally{b(!1)}},formatDuration=e=>`${Math.floor(e/60)}m ${e%60}s`;return v&&x?(0,a.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[a.jsx(r.Z,{role:"company"}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto ml-64",children:[a.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6",children:[a.jsx(o.Z,{}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:h?.name||"Loading..."})]})}),a.jsx("div",{className:"p-6 max-w-6xl",children:g?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-slate-600 mt-4",children:"Loading interview data..."})]}):N?(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[a.jsx(d.Z,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Interview Found"}),a.jsx("p",{className:"text-slate-600 mb-6",children:"This applicant has not completed an interview yet."}),a.jsx("button",{onClick:()=>window.history.back(),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go Back"})]}):h?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Interview Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Applied For"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:h.position})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Interviewed On"}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:new Date(h.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4"}),"Email"]}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:h.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"Interview Duration"]}),a.jsx("p",{className:"text-lg font-semibold text-slate-900",children:formatDuration(h.duration)})]})]})]}),w&&(0,a.jsxs)("div",{className:`${(e=w.jobSuitability)>=70?"bg-green-50":e>=50?"bg-yellow-50":"bg-red-50"} rounded-lg border border-slate-200 p-6`,children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Job Suitability Analysis"}),(0,a.jsxs)("div",{className:"flex items-end gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:`text-5xl font-bold ${(t=w.jobSuitability)>=70?"text-green-600":t>=50?"text-yellow-600":"text-red-600"}`,children:[w.jobSuitability,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-600 mt-2",children:[h.duration||0,"s interview"]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Recommendation"}),a.jsx("p",{className:`text-lg font-bold ${"Consider for Interview"===w.recommendation?"text-green-600":"text-red-600"}`,children:w.recommendation})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Relevant Accomplishments"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[w.relevantAccomplishments,"%"]})]}),(0,a.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Drive & Initiative"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[w.driveInitiative,"%"]})]}),(0,a.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Problem Solving"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[w.problemSolving,"%"]})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Assessment Summary"}),a.jsx("p",{className:"text-slate-700",children:w.summary})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-600",children:"Total Responses"}),a.jsx("p",{className:"text-lg font-bold text-slate-900",children:w.userMessageCount})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-600",children:"Skills Discussed"}),a.jsx("p",{className:"text-lg font-bold text-slate-900",children:w.skillsCount})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-600",children:"Avg Response Length"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-slate-900",children:[w.avgResponseLength," chars"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-slate-600",children:"Duration"}),a.jsx("p",{className:"text-lg font-bold text-slate-900",children:formatDuration(h.duration)})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>updateApplicantStatus("shortlisted"),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold",disabled:g,children:"Shortlist Candidate"}),a.jsx("button",{onClick:()=>updateApplicantStatus("rejected"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-semibold",disabled:g,children:"Reject Candidate"})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(d.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"No data available"})]})})]})]}):null}},87534:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=s(95153);let n=(0,a.createProxy)(String.raw`C:\Users\omt91\Downloads\main\interviewverse_frontend\app\business\dashboard\applicants\[applicantId]\page.tsx`),{__esModule:l,$$typeof:i}=n,r=n.default,o=r}};var t=require("../../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[6977,8025,2322,5007,8517,2656,2012,8607,7573],()=>__webpack_exec__(97652));module.exports=s})();