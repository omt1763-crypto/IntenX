(()=>{var e={};e.id=2315,e.ids=[2315],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},87043:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>b,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(44355),s(32959),s(35866);var i=s(23191),r=s(88716),n=s(37922),o=s.n(n),l=s(95231),a={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);s.d(t,a);let d=["",{children:["debug",{children:["fix-interviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,44355)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\debug\\fix-interviews\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32959)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\debug\\fix-interviews\\page.tsx"],b="/debug/fix-interviews/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/debug/fix-interviews/page",pathname:"/debug/fix-interviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},82558:(e,t,s)=>{Promise.resolve().then(s.bind(s,29577))},29577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var i=s(10326),r=s(17577),n=s(55469),o=s(99683);function l(){let{user:e}=(0,n.a)(),[t,s]=(0,r.useState)(null),[l,a]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[b,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),h=async()=>{a(!0),x("");try{let t=await fetch(`/api/fix-interview-job-ids?recruiterId=${e?.id}`),i=await t.json();console.log("Diagnostics result:",i),s(i.diagnostics),i.diagnostics.interviews_without_job_id>0?x(`ISSUE FOUND: ${i.diagnostics.interviews_without_job_id} interviews are missing job_id!`):x("✅ All interviews have job_id. No issues found.")}catch(e){console.error("Diagnostic error:",e),x("Error running diagnostics: "+e)}finally{a(!1)}},g=async()=>{if(!u){x("Please select a job ID to link interviews to");return}c(!0),x("");try{let t=await fetch("/api/fix-interview-job-ids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recruiterId:e?.id,jobId:u})}),s=await t.json();console.log("Fix result:",s),x(s.message||"Fix completed"),await h()}catch(e){console.error("Fix error:",e),x("Error fixing interviews: "+e)}finally{c(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[i.jsx(o.Z,{role:"recruiter"}),i.jsx("main",{className:"ml-64 p-8",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Interview Diagnostics & Fix"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Debug why interviews aren't showing on the dashboard"}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Run Diagnostics"}),i.jsx("button",{onClick:h,disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-400 transition font-semibold",children:l?"Running...":"Run Diagnostics"})]}),b&&i.jsx("div",{className:`p-4 rounded-lg mb-6 ${b.includes("ISSUE")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:b}),t&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Diagnostics Results"}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Jobs"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.total_jobs})]}),(0,i.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Interviews with job_id"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.interviews_with_job_id})]}),(0,i.jsxs)("div",{className:`border-l-4 ${t.interviews_without_job_id>0?"border-red-500":"border-green-500"} pl-4`,children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Interviews WITHOUT job_id ⚠️"}),i.jsx("p",{className:`text-2xl font-bold ${t.interviews_without_job_id>0?"text-red-600":"text-green-600"}`,children:t.interviews_without_job_id})]})]}),t.interviews_without_job_id>0&&(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-yellow-900 mb-4",children:"Fix Missing job_id Values"}),(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Job to Link To:"}),(0,i.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"-- Select a job --"}),t.jobs?.map(e=>i.jsxs("option",{value:e.id,children:[e.title," (",e.id.substring(0,8),"...)"]},e.id))]})]}),i.jsx("button",{onClick:g,disabled:d||!u,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-slate-400 transition font-semibold",children:d?"Fixing...":`Fix All ${t.interviews_without_job_id} Interviews`})]}),t.jobs&&t.jobs.length>0&&(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Your Jobs"}),i.jsx("div",{className:"space-y-2",children:t.jobs.map(e=>(0,i.jsxs)("div",{className:"p-3 bg-slate-50 rounded border border-slate-200",children:[i.jsx("p",{className:"font-medium text-slate-900",children:e.title}),i.jsx("p",{className:"text-xs text-slate-500 font-mono",children:e.id})]},e.id))})]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What's happening?"}),i.jsx("p",{className:"text-blue-800 text-sm mb-4",children:'When interviews are saved, they should be linked to a job_id so the dashboard can filter and count them correctly. If you see "Interviews WITHOUT job_id" above, it means old interviews don\'t have this linkage.'}),i.jsx("p",{className:"text-blue-800 text-sm",children:'Click "Fix All [N] Interviews" to automatically link them to the selected job. After fixing, go to your dashboard and refresh to see the interview count update!'})]})]})})]})}},44355:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(68570).createProxy)(String.raw`C:\Users\omt91\Downloads\main\interviewverse_frontend\app\debug\fix-interviews\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[8948,3369,4829,6698],()=>s(87043));module.exports=i})();