(()=>{var e={};e.id=2315,e.ids=[2315],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},46440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>b,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var i=s(67096),r=s(16132),n=s(37284),o=s.n(n),a=s(32564),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let d=["",{children:["debug",{children:["fix-interviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21638)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\debug\\fix-interviews\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,21606)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\debug\\fix-interviews\\page.tsx"],x="/debug/fix-interviews/page",b={require:s,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/debug/fix-interviews/page",pathname:"/debug/fix-interviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},66982:(e,t,s)=>{Promise.resolve().then(s.bind(s,16451))},16451:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>FixInterviewsPage});var i=s(30784),r=s(9885),n=s(53306),o=s(98607);function FixInterviewsPage(){let{user:e}=(0,n.useAuth)(),[t,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[x,b]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),runDiagnostics=async()=>{l(!0),b("");try{let t=await fetch(`/api/fix-interview-job-ids?recruiterId=${e?.id}`),i=await t.json();console.log("Diagnostics result:",i),s(i.diagnostics),i.diagnostics.interviews_without_job_id>0?b(`ISSUE FOUND: ${i.diagnostics.interviews_without_job_id} interviews are missing job_id!`):b("✅ All interviews have job_id. No issues found.")}catch(e){console.error("Diagnostic error:",e),b("Error running diagnostics: "+e)}finally{l(!1)}},fixInterviews=async()=>{if(!u){b("Please select a job ID to link interviews to");return}c(!0),b("");try{let t=await fetch("/api/fix-interview-job-ids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recruiterId:e?.id,jobId:u})}),s=await t.json();console.log("Fix result:",s),b(s.message||"Fix completed"),await runDiagnostics()}catch(e){console.error("Fix error:",e),b("Error fixing interviews: "+e)}finally{c(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[i.jsx(o.Z,{role:"recruiter"}),i.jsx("main",{className:"ml-64 p-8",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Interview Diagnostics & Fix"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Debug why interviews aren't showing on the dashboard"}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Run Diagnostics"}),i.jsx("button",{onClick:runDiagnostics,disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-400 transition font-semibold",children:a?"Running...":"Run Diagnostics"})]}),x&&i.jsx("div",{className:`p-4 rounded-lg mb-6 ${x.includes("ISSUE")?"bg-red-50 text-red-800 border border-red-200":"bg-green-50 text-green-800 border border-green-200"}`,children:x}),t&&(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Diagnostics Results"}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Jobs"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.total_jobs})]}),(0,i.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Interviews with job_id"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.interviews_with_job_id})]}),(0,i.jsxs)("div",{className:`border-l-4 ${t.interviews_without_job_id>0?"border-red-500":"border-green-500"} pl-4`,children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Interviews WITHOUT job_id ⚠️"}),i.jsx("p",{className:`text-2xl font-bold ${t.interviews_without_job_id>0?"text-red-600":"text-green-600"}`,children:t.interviews_without_job_id})]})]}),t.interviews_without_job_id>0&&(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-yellow-900 mb-4",children:"Fix Missing job_id Values"}),(0,i.jsxs)("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Job to Link To:"}),(0,i.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"-- Select a job --"}),t.jobs?.map(e=>i.jsxs("option",{value:e.id,children:[e.title," (",e.id.substring(0,8),"...)"]},e.id))]})]}),i.jsx("button",{onClick:fixInterviews,disabled:d||!u,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-slate-400 transition font-semibold",children:d?"Fixing...":`Fix All ${t.interviews_without_job_id} Interviews`})]}),t.jobs&&t.jobs.length>0&&(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Your Jobs"}),i.jsx("div",{className:"space-y-2",children:t.jobs.map(e=>(0,i.jsxs)("div",{className:"p-3 bg-slate-50 rounded border border-slate-200",children:[i.jsx("p",{className:"font-medium text-slate-900",children:e.title}),i.jsx("p",{className:"text-xs text-slate-500 font-mono",children:e.id})]},e.id))})]})]}),(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"What's happening?"}),i.jsx("p",{className:"text-blue-800 text-sm mb-4",children:'When interviews are saved, they should be linked to a job_id so the dashboard can filter and count them correctly. If you see "Interviews WITHOUT job_id" above, it means old interviews don\'t have this linkage.'}),i.jsx("p",{className:"text-blue-800 text-sm",children:'Click "Fix All [N] Interviews" to automatically link them to the selected job. After fixing, go to your dashboard and refresh to see the interview count update!'})]})]})})]})}},21638:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>l});var i=s(95153);let r=(0,i.createProxy)(String.raw`C:\Users\omt91\Downloads\main\interviewverse_frontend\app\debug\fix-interviews\page.tsx`),{__esModule:n,$$typeof:o}=r,a=r.default,l=a}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[6977,8025,2322,5007,8517,2012,8607],()=>__webpack_exec__(46440));module.exports=s})();