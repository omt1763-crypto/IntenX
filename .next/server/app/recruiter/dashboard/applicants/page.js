(()=>{var e={};e.id=9557,e.ids=[9557],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},51124:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=s(67096),r=s(16132),l=s(37284),n=s.n(l),i=s(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["recruiter",{children:["dashboard",{children:["applicants",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,52534)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\recruiter\\dashboard\\applicants\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,21606)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\recruiter\\dashboard\\applicants\\page.tsx"],p="/recruiter/dashboard/applicants/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/recruiter/dashboard/applicants/page",pathname:"/recruiter/dashboard/applicants",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77128:(e,t,s)=>{Promise.resolve().then(s.bind(s,60638))},60638:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ApplicantsPage});var a=s(30784),r=s(9885),l=s(57114),n=s(53306),i=s(27912),o=s(98607),d=s(81547),c=s(49384),p=s(3861),x=s(61147),m=s(99452),u=s(76053),h=s(29769),b=s(17856),g=s(26753),j=s(67885),f=s(36595),v=s(5805),w=s(78205);function ApplicantsPage(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),{user:s,isAuthenticated:N}=(0,n.useAuth)(),{isOpen:y}=(0,i.useSidebar)(),[_,A]=(0,r.useState)([]),[P,C]=(0,r.useState)([]),[S,k]=(0,r.useState)(!0),[Z,$]=(0,r.useState)(!1),[q,E]=(0,r.useState)(new Set),[D,U]=(0,r.useState)(""),[I,L]=(0,r.useState)(""),J=s?.id,T=t.get("jobId");(0,r.useEffect)(()=>{$(!0),J&&N?loadApplicants():Z&&!N&&e.push("/auth/login")},[J,N,Z]);let loadApplicants=async()=>{try{if(!J)return;console.log("[ApplicantsPage] Loading applicants for recruiter:",J);let e=await fetch(`/api/get-applicants?recruiterId=${J}`),t=await e.json();if(console.log("[ApplicantsPage] API response:",t),t.data){console.log("[ApplicantsPage] Raw applicants data:",t.data),A(t.data);let e=groupApplicantsByJob(t.data);console.log("[ApplicantsPage] Grouped by job:",e),C(e),T?E(new Set([T])):E(new Set(e.map(e=>e.job.id))),console.log("[ApplicantsPage] Applicants loaded:",t.data.length)}}catch(e){console.error("[ApplicantsPage] Error loading applicants:",e)}finally{k(!1)}},groupApplicantsByJob=e=>{let t=e;T&&(t=e.filter(e=>e.job_id===T));let s={};t.forEach(e=>{let t=e.job_id;s[t]||(s[t]={job:{id:e.jobs?.id||t,title:e.jobs?.title||"Unknown Job",company:e.jobs?.company||"Unknown Company"},applicants:[],expanded:!0}),s[t].applicants.push(e)});let a=Object.values(s).sort((e,t)=>e.job.title.localeCompare(t.job.title));return a},toggleJobExpand=e=>{let t=new Set(q);t.has(e)?t.delete(e):t.add(e),E(t)},getStatusIcon=e=>{switch(e){case"completed":return a.jsx(d.Z,{className:"w-5 h-5 text-green-600"});case"in-progress":return a.jsx(c.Z,{className:"w-5 h-5 text-blue-600"});case"rejected":return a.jsx(p.Z,{className:"w-5 h-5 text-red-600"});default:return a.jsx(c.Z,{className:"w-5 h-5 text-yellow-600"})}},getStatusBadgeColor=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),getTotalApplicants=()=>P.reduce((e,t)=>e+t.applicants.length,0);if(!Z||!N)return null;let G=(()=>{let e={completed:0,"in-progress":0,rejected:0,pending:0};return _.forEach(t=>{e.hasOwnProperty(t.status)?e[t.status]++:e.pending++}),e})(),R=P.map(e=>({...e,applicants:e.applicants.filter(e=>{let t=e.name.toLowerCase().includes(D.toLowerCase())||e.email.toLowerCase().includes(D.toLowerCase()),s=!I||e.status===I;return t&&s})})).filter(e=>e.applicants.length>0);return(0,a.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[a.jsx(o.Z,{role:"recruiter"}),(0,a.jsxs)("div",{className:`flex-1 overflow-auto transition-all duration-300 ${y?"ml-64":"ml-20"}`,children:[a.jsx("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("button",{onClick:()=>e.push(T?"/recruiter/dashboard/jobs":"/recruiter/dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-all hover:scale-110 duration-200",children:a.jsx(x.Z,{className:"w-6 h-6 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg",children:a.jsx(m.Z,{className:"w-8 h-8 text-blue-600"})}),T?"Job Applicants":"All Applicants"]}),a.jsx("p",{className:"text-slate-600 mt-2",children:T?`${getTotalApplicants()} candidate${1!==getTotalApplicants()?"s":""} for ${P[0]?.job.title||"this job"}`:`${getTotalApplicants()} total candidates across ${P.length} job${1!==P.length?"s":""}`})]})]}),_.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Completed"}),a.jsx("p",{className:"text-2xl font-bold text-green-700",children:G.completed})]}),a.jsx(d.Z,{className:"w-8 h-8 text-green-600 opacity-30"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:G["in-progress"]})]}),a.jsx(c.Z,{className:"w-8 h-8 text-blue-600 opacity-30"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-bold text-red-700",children:G.rejected})]}),a.jsx(p.Z,{className:"w-8 h-8 text-red-600 opacity-30"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4 border border-amber-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-amber-600 font-medium",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold text-amber-700",children:G.pending})]}),a.jsx(u.Z,{className:"w-8 h-8 text-amber-600 opacity-30"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:D,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("select",{value:I,onChange:e=>L(e.target.value),className:"px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all cursor-pointer",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"in-progress",children:"In Progress"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),a.jsx("div",{className:"p-6",children:S?(0,a.jsxs)("div",{className:"text-center py-20",children:[a.jsx("div",{className:"inline-block",children:a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"})}),a.jsx("p",{className:"text-slate-600 mt-6 text-lg font-medium",children:"Loading applicants..."})]}):0!==R.length||D||I||0!==P.length?0===R.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-slate-200 shadow-sm",children:[a.jsx(b.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-900 text-lg font-semibold",children:"No results found"}),a.jsx("p",{className:"text-slate-600 text-sm mt-2",children:"Try adjusting your search or filter criteria"})]}):a.jsx("div",{className:"space-y-4",children:R.map(t=>(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>toggleJobExpand(t.job.id),className:"w-full px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 to-transparent transition-all flex items-center justify-between border-b border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 text-left",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:a.jsx(g.Z,{className:"w-7 h-7 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:t.job.title}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t.job.company})]}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2 rounded-full shadow-md",children:[t.applicants.length," applicant",1!==t.applicants.length?"s":""]})]}),a.jsx("div",{className:"ml-4",children:q.has(t.job.id)?a.jsx(j.Z,{className:"w-6 h-6 text-slate-400"}):a.jsx(f.Z,{className:"w-6 h-6 text-slate-400"})})]}),q.has(t.job.id)&&a.jsx("div",{className:"divide-y divide-slate-100",children:t.applicants.map((t,s)=>a.jsx("div",{className:"px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 to-transparent transition-all duration-150 group",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-300 to-slate-400 rounded-lg flex items-center justify-center flex-shrink-0 font-bold text-white text-sm",children:t.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-bold text-slate-900 text-base",children:t.name}),getStatusIcon(t.status)]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm text-slate-600 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx(v.Z,{className:"w-4 h-4 flex-shrink-0 text-slate-400"}),a.jsx("a",{href:`mailto:${t.email}`,className:"hover:text-blue-600 truncate font-medium",children:t.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-slate-400",children:"â€¢"}),a.jsx("span",{className:"font-medium text-slate-700",children:t.position_applied})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(w.Z,{className:"w-4 h-4 flex-shrink-0 text-slate-400"}),a.jsx("span",{className:"font-medium",children:formatDate(t.created_at)})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[t.status&&a.jsx("span",{className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${getStatusBadgeColor(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1).replace("-"," ")}),a.jsx("button",{onClick:()=>e.push(`/recruiter/dashboard/applicants/${t.id}`),className:"px-5 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-200 whitespace-nowrap shadow-md hover:shadow-lg hover:scale-105 active:scale-95",children:"View Details"})]})]})},t.id))})]},t.job.id))}):(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-slate-200 shadow-sm",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(m.Z,{className:"w-8 h-8 text-blue-600"})}),a.jsx("p",{className:"text-slate-900 text-xl font-semibold",children:"No applicants yet"}),a.jsx("p",{className:"text-slate-600 text-sm mt-2",children:"Applicants will appear here when candidates apply for your jobs"})]})}),"      "]})]})}},52534:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var a=s(95153);let r=(0,a.createProxy)(String.raw`C:\Users\omt91\Downloads\main\interviewverse_frontend\app\recruiter\dashboard\applicants\page.tsx`),{__esModule:l,$$typeof:n}=r,i=r.default,o=i}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[6977,8025,2322,5007,8517,5098,2439,2012,8607],()=>__webpack_exec__(51124));module.exports=s})();