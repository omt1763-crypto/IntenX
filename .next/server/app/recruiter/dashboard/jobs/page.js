(()=>{var e={};e.id=8970,e.ids=[8970],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},8864:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(67096),r=s(16132),i=s(37284),n=s.n(i),l=s(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["recruiter",{children:["dashboard",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23993)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\recruiter\\dashboard\\jobs\\page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,21606)),"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\recruiter\\dashboard\\jobs\\page.js"],m="/recruiter/dashboard/jobs/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/recruiter/dashboard/jobs/page",pathname:"/recruiter/dashboard/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},46791:(e,t,s)=>{Promise.resolve().then(s.bind(s,46770))},46770:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>RecruiterJobsPage});var a=s(30784),r=s(9885),i=s(89139),n=s(8965),l=s(88574),o=s(73916),d=s(26753),c=s(78205),m=s(86809),x=s(49384),u=s(43335),b=s(57114),p=s(53306),h=s(27912),g=s(98607),j=s(59708);function RecruiterJobsPage(){let e=(0,b.useRouter)(),{user:t}=(0,p.useAuth)(),{isOpen:s}=(0,h.useSidebar)(),[f,v]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[y,_]=(0,r.useState)(!0),[k,P]=(0,r.useState)({}),[S,C]=(0,r.useState)(null),$=t?.id;(0,r.useEffect)(()=>{$&&loadJobs()},[$]);let loadJobs=async()=>{try{console.log("[Jobs] Loading jobs summary for recruiter:",$),_(!0);let e=await fetch(`/api/recruiter/jobs-summary?recruiterId=${$}`),t=await e.json();if(t&&t.success){let e=t.jobs||[];console.log("[Jobs] Loaded jobs from API:",e),v(e),N(e);let s={};e.forEach(e=>{let t=getSecondsRemaining(e);console.log(`[Jobs] Job ${e.id} - created_at: ${e.created_at}, timer: ${t}s`),s[e.id]=t}),P(s)}else{console.warn("[Jobs] Jobs summary failed; falling back to client fetch");let{data:e}=await j.OQ.from("jobs").select("*").eq("recruiter_id",$).limit(50);console.log("[Jobs] Loaded jobs from Supabase:",e),v(e||[]),N(e||[]);let t=({})(e||[]).forEach(e=>{let s=getSecondsRemaining(e);console.log(`[Jobs] Job ${e.id} - created_at: ${e.created_at}, timer: ${s}s`),t[e.id]=s});P(t)}_(!1)}catch(e){console.error("[Jobs] Error loading jobs summary:",e),_(!1)}},getSecondsRemaining=e=>{try{if(!e?.created_at)return 900;let t=new Date(e.created_at).getTime(),s=Date.now();return Math.max(0,Math.floor((9e5-(s-t))/1e3))}catch(e){return 900}};(0,r.useEffect)(()=>{let e=setInterval(()=>{P(e=>{let t={...e},s=w&&w.length>0?w:f;return s.forEach(e=>{t[e.id]=getSecondsRemaining(e)}),t})},1e3);return()=>clearInterval(e)},[f,w]);let formatRemaining=e=>!e||e<=0?"Expired":`${String(Math.floor(e/60)).padStart(2,"0")}:${String(e%60).padStart(2,"0")}`,getInterviewLink=e=>{try{return`${window.location.origin}/interview/realtime?jobId=${e.id}`}catch(t){return`/interview/realtime?jobId=${e.id}`}},copyLink=async e=>{let t=getInterviewLink(e);try{await navigator.clipboard.writeText(t),C(e.id),setTimeout(()=>C(null),3e3)}catch(e){console.warn("Copy failed",e)}},J={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},handleViewDetails=t=>e.push(`/recruiter/dashboard/applicants?jobId=${t}`);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[a.jsx(g.Z,{role:"recruiter"}),(0,a.jsxs)("div",{className:"fixed inset-0 pointer-events-none opacity-30",children:[a.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] bg-gradient-to-b from-blue-500/20 to-transparent rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-[300px] h-[300px] bg-gradient-to-t from-blue-600/15 to-transparent rounded-full blur-3xl"})]}),(0,a.jsxs)("div",{className:"ml-64",children:[a.jsx(i.E.div,{className:"sticky top-0 z-40 border-b border-slate-200/50 bg-white/80 backdrop-blur-xl shadow-sm",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:a.jsx("div",{className:"px-8 py-5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Job Postings"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage your job listings and applications"})]}),(0,a.jsxs)("button",{onClick:()=>e.push("/recruiter/dashboard/jobs/new"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 transition-all font-semibold shadow-md hover:shadow-lg",children:[a.jsx(n.Z,{className:"w-4 h-4"})," Post a Job"]})]})})}),a.jsx("div",{className:"px-8 py-12 relative z-10",children:a.jsx(i.E.div,{className:"space-y-6",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},initial:"hidden",animate:"visible",children:y?a.jsx("p",{className:"text-slate-600",children:"Loading jobs..."}):f.length>0?(w.length>0?w:f).map(e=>(0,a.jsxs)(i.E.div,{className:"rounded-xl border border-slate-200 p-6 bg-white shadow-sm hover:shadow-lg transition-all",variants:J,children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:e.title}),a.jsx("p",{className:"text-sm text-slate-600",children:e.company})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 text-sm",children:[a.jsx(l.Z,{className:"w-4 h-4 text-blue-600"}),e.location||"N/A"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 text-sm",children:[a.jsx(o.Z,{className:"w-4 h-4 text-blue-600"}),e.salary_min?`$${e.salary_min}K`:"N/A"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 text-sm",children:[a.jsx(d.Z,{className:"w-4 h-4 text-blue-600"}),e.applicant_count??0," applicant",(e.applicant_count??0)!==1?"s":""]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-700 text-sm",children:[a.jsx(c.Z,{className:"w-4 h-4 text-blue-600"}),new Date(e.created_at).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("span",{className:"text-xs text-slate-600",children:["Created ",new Date(e.created_at).toLocaleDateString()]}),(0,a.jsxs)("button",{onClick:()=>handleViewDetails(e.id),className:"text-blue-600 hover:text-blue-800 font-semibold transition-all text-sm",children:["View Applicants (",e.applicant_count??0,") â†’"]})]}),k[e.id]>0?(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Interview Link"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded-full bg-green-100 text-green-700",children:[a.jsx(x.Z,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs font-medium",children:formatRemaining(k[e.id])})]})]}),(0,a.jsxs)("p",{className:"text-xs text-slate-600 mb-3",children:["Share this link with candidates (expires in ",formatRemaining(k[e.id]),")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("a",{href:getInterviewLink(e),target:"_blank",rel:"noreferrer",className:"flex-1 px-3 py-2 bg-white border border-blue-300 rounded text-blue-600 hover:bg-blue-50 text-xs font-medium transition-all text-center truncate",children:getInterviewLink(e)}),(0,a.jsxs)("button",{onClick:()=>copyLink(e),className:`px-3 py-2 rounded font-semibold text-xs transition-all flex items-center gap-1 ${S===e.id?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[a.jsx(u.Z,{className:"w-3 h-3"}),S===e.id?"Copied!":"Copy"]})]})]}):a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-red-700 font-medium",children:"Interview link expired - Create a new job to get a fresh link"})})]})]},e.id)):(0,a.jsxs)(i.E.div,{className:"rounded-xl border border-slate-200 p-12 bg-white shadow-sm text-center",variants:J,children:[a.jsx(d.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No job postings yet"}),a.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first job posting to start recruiting"}),a.jsx("button",{onClick:()=>e.push("/recruiter/dashboard/jobs/new"),className:"px-6 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 transition-all font-semibold shadow-md hover:shadow-lg",children:"Post a Job"})]})})})]})]})}},23993:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var a=s(95153);let r=(0,a.createProxy)(String.raw`C:\Users\omt91\Downloads\main\interviewverse_frontend\app\recruiter\dashboard\jobs\page.js`),{__esModule:i,$$typeof:n}=r,l=r.default,o=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[6977,8025,2322,5007,8517,9139,6374,4411,2012,8607],()=>__webpack_exec__(8864));module.exports=s})();