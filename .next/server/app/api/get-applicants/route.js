"use strict";(()=>{var e={};e.id=4498,e.ids=[4498],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},71467:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>j,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>A,staticGenerationAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{GET:()=>c,dynamic:()=>l});var s=r(49303),n=r(88716),a=r(60670),i=r(87070),p=r(85662);let l="force-dynamic";async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("jobId"),o=t.get("recruiterId");if(!o)return i.NextResponse.json({error:"Missing recruiterId parameter"},{status:400});console.log("═".repeat(80)),console.log("[GetApplicants API] \uD83D\uDCE5 Request received"),console.log("[GetApplicants API] recruiterId:",o),console.log("[GetApplicants API] jobId:",r||"none (fetching all)");let s=p.pR.from("job_applicants").select("*, jobs(id, title, company)");if(r)console.log("[GetApplicants API] Filtering by jobId:",r),s=s.eq("job_id",r);else{console.log("[GetApplicants API] Fetching jobs for recruiter:",o);let{data:e,error:t}=await p.pR.from("jobs").select("id, title").eq("recruiter_id",o);if(t)return console.error("[GetApplicants API] ❌ Error fetching recruiter jobs:",t),i.NextResponse.json({error:"Failed to fetch recruiter jobs",data:[]},{status:200});console.log("[GetApplicants API] Found recruiter jobs:",e?.length||0,e?.map(e=>e.title));let r=e?.map(e=>e.id)||[];if(0===r.length)return console.log("[GetApplicants API] ⚠️  No jobs found for recruiter:",o),i.NextResponse.json({success:!0,data:[]});console.log("[GetApplicants API] Filtering applicants by job IDs:",r),s=s.in("job_id",r)}let{data:n,error:a}=await s.order("created_at",{ascending:!1});if(a)return console.error("[GetApplicants API] ❌ Error fetching applicants:",a),console.error("[GetApplicants API] Error code:",a.code),console.error("[GetApplicants API] Error message:",a.message),i.NextResponse.json({error:a.message||"Failed to fetch applicants",code:a.code,data:[]},{status:200});return console.log("[GetApplicants API] ✅ Applicants fetched:",n?.length||0),n&&n.length>0&&console.log("[GetApplicants API] Applicant details:",n.map(e=>({id:e.id,name:e.name,email:e.email,job_id:e.job_id,job_title:e.jobs?.title,status:e.status}))),console.log("═".repeat(80)),i.NextResponse.json({success:!0,data:n||[]})}catch(e){return console.error("[GetApplicants API] Error:",e),i.NextResponse.json({error:e.message||"Internal server error",data:[]},{status:200})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/get-applicants/route",pathname:"/api/get-applicants",filename:"route",bundlePath:"app/api/get-applicants/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\get-applicants\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:u,staticGenerationAsyncStorage:g,serverHooks:A}=d,m="/api/get-applicants/route";function j(){return(0,a.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:g})}},85662:(e,t,r)=>{r.d(t,{OQ:()=>i,pR:()=>p});var o=r(76596);let s=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,a=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!s||!n)throw Error("Missing Supabase environment variables");let i=(0,o.eI)(s,n),p=(0,o.eI)(s,a||n)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972,6596],()=>r(71467));module.exports=o})();