"use strict";(()=>{var e={};e.id=722,e.ids=[722],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},86143:(e,a,t)=>{t.r(a),t.d(a,{headerHooks:()=>p,originalPathname:()=>g,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>c,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>m});var r={};t.r(r),t.d(r,{POST:()=>POST});var n=t(10884),s=t(16132),o=t(95798),i=t(47770);async function POST(e){try{let a=await e.formData(),t=a.get("name"),r=a.get("email"),n=a.get("phone"),s=a.get("position"),d=a.get("jobId"),u=a.get("resume");if(console.log("[CandidateIntake] Received:",{name:t,email:r,phone:n,position:s,jobId:d}),!t||!r||!n||!s)return o.Z.json({error:"Missing required fields"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return o.Z.json({error:"Invalid email format"},{status:400});let{data:l,error:c}=await i.pR.from("candidate_intake").insert([{name:t,email:r,phone:n,position:s,job_id:d,resume_filename:u?.name||null,created_at:new Date().toISOString()}]).select().single();if(c){if(console.error("[CandidateIntake] Database error:",c),console.error("[CandidateIntake] Error code:",c.code),console.error("[CandidateIntake] Error message:",c.message),console.error("[CandidateIntake] Error details:",c.details),"42P01"===c.code||c.message?.includes("does not exist"))return o.Z.json({error:"Database table not set up. Please create the candidate_intake table in Supabase."},{status:500});return o.Z.json({error:c.message||"Failed to save candidate information",details:c.details,code:c.code},{status:500})}return console.log("[CandidateIntake] Candidate saved:",l.id),o.Z.json({success:!0,message:"Candidate information saved successfully",candidateId:l.id},{status:201})}catch(e){return console.error("[CandidateIntake] Error:",e),o.Z.json({error:"Internal server error",details:String(e)},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/candidate-intake/route",pathname:"/api/candidate-intake",filename:"route",bundlePath:"app/api/candidate-intake/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\candidate-intake\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:c,headerHooks:p,staticGenerationBailout:m}=d,g="/api/candidate-intake/route"}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[729,5798,8617,7770],()=>__webpack_exec__(86143));module.exports=t})();