"use strict";(()=>{var e={};e.id=6452,e.ids=[6452],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},83498:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>_,patchFetch:()=>h,requestAsyncStorage:()=>y,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var n={};t.r(n),t.d(n,{POST:()=>d,dynamic:()=>u});var s=t(49303),o=t(88716),a=t(60670),i=t(87070),c=t(85662);let u="force-dynamic";async function l(e){try{let r=await fetch(`https://ip-api.com/json/${e}?fields=country,countryCode,city,isp`,{next:{revalidate:3600}});if(!r.ok)return console.warn("[Analytics] IP-API returned non-ok status:",r.status),null;let t=await r.json();if("success"===t.status&&t.country)return{country:t.country,country_code:t.countryCode||"",city:t.city||"Unknown"};return null}catch(e){return console.error("[Analytics] Geolocation error:",e),null}}async function d(e){try{let{page_path:r,referrer:t,session_id:n,user_id:s}=await e.json(),o=e.headers.get("x-forwarded-for")?.split(",")[0].trim()||e.headers.get("x-real-ip")||"0.0.0.0",a=e.headers.get("user-agent")||"",{device_type:u,browser:d}=function(e){if(!e)return{device_type:"unknown",browser:"unknown"};let r=e.toLowerCase(),t="desktop";(r.includes("mobile")||r.includes("android")||r.includes("iphone")||r.includes("ipad"))&&(t=r.includes("mobile")||r.includes("android")||r.includes("iphone")?"mobile":"tablet");let n="unknown";return r.includes("chrome")?n="Chrome":r.includes("firefox")?n="Firefox":r.includes("safari")?n="Safari":r.includes("edge")?n="Edge":r.includes("opera")&&(n="Opera"),{device_type:t,browser:n}}(a),p=await l(o);p||(p={country:"Unknown",country_code:"XX",city:"Unknown"});let{data:y,error:f}=await c.pR.from("analytics_events").insert([{page_path:r,country:p.country,country_code:p.country_code,city:p.city,device_type:u,browser:d,referrer:t||null,ip_address:o,user_agent:a,session_id:n,user_id:s||null}]).select();if(f)return console.error("[Analytics] Insert error:",f),i.NextResponse.json({success:!1,error:f.message},{status:500});return i.NextResponse.json({success:!0,data:y})}catch(e){return console.error("[Analytics] Tracking error:",e),i.NextResponse.json({success:!1,error:e.message},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/analytics/track/route",pathname:"/api/analytics/track",filename:"route",bundlePath:"app/api/analytics/track/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\analytics\\track\\route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:m}=p,_="/api/analytics/track/route";function h(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},85662:(e,r,t)=>{t.d(r,{OQ:()=>i,pR:()=>c});var n=t(76596);let s=process.env.NEXT_PUBLIC_SUPABASE_URL,o=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,a=process.env.SUPABASE_SERVICE_ROLE_KEY,i=null,c=null;s&&o&&(i=(0,n.eI)(s,o),c=(0,n.eI)(s,a||o))}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[8948,5972,6596],()=>t(83498));module.exports=n})();