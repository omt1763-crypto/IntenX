"use strict";(()=>{var e={};e.id=7650,e.ids=[7650],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},23254:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>d,originalPathname:()=>v,requestAsyncStorage:()=>c,routeModule:()=>n,serverHooks:()=>m,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>p});var r={};t.r(r),t.d(r,{POST:()=>POST});var a=t(10884),l=t(16132),i=t(95798);let o=process.env.OPENAI_API_KEY;async function POST(e){try{let s;let t=await e.formData(),r=t.get("resume"),a=t.get("role");if(console.log("[ExtractResume] Extracting skills from resume for role:",a),!r)return i.Z.json({error:"No resume file provided"},{status:400});let l=await r.arrayBuffer(),n=Buffer.from(l).toString("utf-8");if(console.log("[ExtractResume] Resume text length:",n.length),!o)return console.log("[ExtractResume] No OpenAI API key, using mock skills"),i.Z.json({success:!0,skills:[{skill:"Communication",level:"advanced"},{skill:"Problem Solving",level:"advanced"},{skill:"Leadership",level:"intermediate"},{skill:"Time Management",level:"advanced"},{skill:"Teamwork",level:"advanced"}],experience:"5+ years",achievements:["Successfully led multiple projects","Strong technical background"],education:"Bachelor's Degree",message:"Using mock skills - set OPENAI_API_KEY for real extraction"});let c=`You are a recruiter. Extract the following from this resume:
1. Top technical/professional skills (max 10)
2. Years of experience
3. Key achievements
4. Education level

Resume text:
${n.substring(0,3e3)}

Return ONLY valid JSON (no markdown):
{
  "skills": ["skill1", "skill2", ...],
  "experience": "number of years",
  "achievements": ["achievement1", "achievement2"],
  "education": "highest degree"
}
`,u=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a professional recruiter. Extract information from resumes in valid JSON format only."},{role:"user",content:c}],temperature:.5,max_tokens:500})});if(!u.ok){let e=await u.json();return console.error("[ExtractResume] OpenAI error:",e),i.Z.json({success:!0,skills:[{skill:"Communication",level:"advanced"},{skill:"Problem Solving",level:"advanced"},{skill:"Leadership",level:"intermediate"}],experience:"5+ years",achievements:["Experienced professional"],education:"Bachelor's Degree",message:"Could not extract from OpenAI, using default skills"})}let m=await u.json(),d=m.choices[0].message.content;try{s=JSON.parse(d)}catch(t){let e=d.match(/\{[\s\S]*\}/);s=e?JSON.parse(e[0]):{skills:[],experience:"unknown"}}return console.log("[ExtractResume] Extracted data:",s),i.Z.json({success:!0,skills:s.skills||[],experience:s.experience,achievements:s.achievements||[],education:s.education||"Not specified"})}catch(e){return console.error("[ExtractResume] Error:",e),i.Z.json({success:!0,skills:[{skill:"Communication",level:"advanced"},{skill:"Problem Solving",level:"advanced"},{skill:"Leadership",level:"intermediate"},{skill:"Team Management",level:"intermediate"},{skill:"Project Management",level:"advanced"}],experience:"5+ years",achievements:["Capable professional"],education:"Bachelor's Degree",message:"Resume uploaded successfully"})}}let n=new a.AppRouteRouteModule({definition:{kind:l.x.APP_ROUTE,page:"/api/extract-resume-skills/route",pathname:"/api/extract-resume-skills",filename:"route",bundlePath:"app/api/extract-resume-skills/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\extract-resume-skills\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:u,serverHooks:m,headerHooks:d,staticGenerationBailout:p}=n,v="/api/extract-resume-skills/route"}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[729,5798],()=>__webpack_exec__(23254));module.exports=t})();