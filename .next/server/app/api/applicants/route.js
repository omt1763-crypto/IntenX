"use strict";(()=>{var e={};e.id=7894,e.ids=[7894],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},40853:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>d,originalPathname:()=>m,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>u,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>A});var r={};a.r(r),a.d(r,{GET:()=>GET,PATCH:()=>PATCH,POST:()=>POST});var s=a(10884),n=a(16132),o=a(95798),i=a(47770);async function POST(e){try{let{applicantData:t}=await e.json();if(console.log("[CreateApplicant API] Creating applicant:",{name:t.name,email:t.email,jobId:t.job_id}),!t.name||!t.email||!t.job_id)return o.Z.json({error:"Missing required fields: name, email, job_id"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))return o.Z.json({error:"Invalid email format"},{status:400});let{data:a,error:r}=await i.pR.from("job_applicants").insert([{id:t.id,job_id:t.job_id,name:t.name,email:t.email,position_applied:t.position_applied||"",status:t.status||"",created_at:t.created_at||new Date().toISOString()}]).select().single();if(r){if(console.error("[CreateApplicant API] Database error:",r),r.message&&r.message.includes("job_applicants"))return console.error("[CreateApplicant API] job_applicants table not found"),console.log("[CreateApplicant API] ℹ️  Please create the table by running SQL in Supabase dashboard"),o.Z.json({error:"Applicants table not found. Please run the SQL migration.",details:"See CREATE_JOB_APPLICANTS_TABLE.sql file in the project root",code:"TABLE_NOT_FOUND"},{status:503});return o.Z.json({error:r.message||"Failed to create applicant",details:r.details},{status:500})}return console.log("[CreateApplicant API] Applicant created successfully:",a.id),o.Z.json({success:!0,applicant:a},{status:201})}catch(e){return console.error("[CreateApplicant API] Unexpected error:",e),o.Z.json({error:e.message||"Internal server error"},{status:500})}}async function GET(e){try{let{searchParams:t}=new URL(e.url),a=t.get("jobId");if(!a)return o.Z.json({error:"jobId query parameter required"},{status:400});console.log("[GetApplicants API] Fetching applicants for job:",a);let{data:r,error:s}=await i.pR.from("job_applicants").select("*").eq("job_id",a).order("created_at",{ascending:!1});if(s){if(console.error("[GetApplicants API] Database error:",s),s.message&&s.message.includes("job_applicants"))return console.log("[GetApplicants API] Returning empty list - table not found"),o.Z.json({applicants:[],count:0,warning:"job_applicants table not yet created"},{status:200});return o.Z.json({error:s.message||"Failed to fetch applicants"},{status:500})}return console.log("[GetApplicants API] Found applicants:",r?.length||0),o.Z.json({applicants:r||[],count:r?.length||0},{status:200})}catch(e){return console.error("[GetApplicants API] Unexpected error:",e),o.Z.json({error:e.message||"Internal server error"},{status:500})}}async function PATCH(e){try{let{applicantId:t,status:a}=await e.json();if(!t||!a)return o.Z.json({error:"applicantId and status are required"},{status:400});console.log("[UpdateApplicant API] Updating applicant:",{applicantId:t,status:a});let{data:r,error:s}=await i.pR.from("job_applicants").update({status:a}).eq("id",t).select().single();if(s)return console.error("[UpdateApplicant API] Database error:",s),o.Z.json({error:s.message||"Failed to update applicant"},{status:500});return console.log("[UpdateApplicant API] Applicant updated:",r?.id),o.Z.json({success:!0,applicant:r},{status:200})}catch(e){return console.error("[UpdateApplicant API] Unexpected error:",e),o.Z.json({error:e.message||"Internal server error"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/applicants/route",pathname:"/api/applicants",filename:"route",bundlePath:"app/api/applicants/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\applicants\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:u,headerHooks:d,staticGenerationBailout:A}=p,m="/api/applicants/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[729,5798,8617,7770],()=>__webpack_exec__(40853));module.exports=a})();