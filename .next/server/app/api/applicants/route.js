"use strict";(()=>{var e={};e.id=7894,e.ids=[7894],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38965:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>_,patchFetch:()=>P,requestAsyncStorage:()=>m,routeModule:()=>A,serverHooks:()=>j,staticGenerationAsyncStorage:()=>g});var s={};a.r(s),a.d(s,{GET:()=>u,PATCH:()=>d,POST:()=>c,dynamic:()=>l});var r=a(49303),n=a(88716),o=a(60670),p=a(87070),i=a(85662);let l="force-dynamic";async function c(e){try{let{applicantData:t}=await e.json();if(console.log("[CreateApplicant API] Creating applicant:",{name:t.name,email:t.email,jobId:t.job_id}),!t.name||!t.email||!t.job_id)return p.NextResponse.json({error:"Missing required fields: name, email, job_id"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))return p.NextResponse.json({error:"Invalid email format"},{status:400});let{data:a,error:s}=await i.pR.from("job_applicants").insert([{id:t.id,job_id:t.job_id,name:t.name,email:t.email,position_applied:t.position_applied||"",status:t.status||"",created_at:t.created_at||new Date().toISOString()}]).select().single();if(s){if(console.error("[CreateApplicant API] Database error:",s),s.message&&s.message.includes("job_applicants"))return console.error("[CreateApplicant API] job_applicants table not found"),console.log("[CreateApplicant API] ℹ️  Please create the table by running SQL in Supabase dashboard"),p.NextResponse.json({error:"Applicants table not found. Please run the SQL migration.",details:"See CREATE_JOB_APPLICANTS_TABLE.sql file in the project root",code:"TABLE_NOT_FOUND"},{status:503});return p.NextResponse.json({error:s.message||"Failed to create applicant",details:s.details},{status:500})}return console.log("[CreateApplicant API] Applicant created successfully:",a.id),p.NextResponse.json({success:!0,applicant:a},{status:201})}catch(e){return console.error("[CreateApplicant API] Unexpected error:",e),p.NextResponse.json({error:e.message||"Internal server error"},{status:500})}}async function u(e){try{let{searchParams:t}=new URL(e.url),a=t.get("jobId");if(!a)return p.NextResponse.json({error:"jobId query parameter required"},{status:400});console.log("[GetApplicants API] Fetching applicants for job:",a);let{data:s,error:r}=await i.pR.from("job_applicants").select("*").eq("job_id",a).order("created_at",{ascending:!1});if(r){if(console.error("[GetApplicants API] Database error:",r),r.message&&r.message.includes("job_applicants"))return console.log("[GetApplicants API] Returning empty list - table not found"),p.NextResponse.json({applicants:[],count:0,warning:"job_applicants table not yet created"},{status:200});return p.NextResponse.json({error:r.message||"Failed to fetch applicants"},{status:500})}return console.log("[GetApplicants API] Found applicants:",s?.length||0),p.NextResponse.json({applicants:s||[],count:s?.length||0},{status:200})}catch(e){return console.error("[GetApplicants API] Unexpected error:",e),p.NextResponse.json({error:e.message||"Internal server error"},{status:500})}}async function d(e){try{let{applicantId:t,status:a}=await e.json();if(!t||!a)return p.NextResponse.json({error:"applicantId and status are required"},{status:400});console.log("[UpdateApplicant API] Updating applicant:",{applicantId:t,status:a});let{data:s,error:r}=await i.pR.from("job_applicants").update({status:a}).eq("id",t).select().single();if(r)return console.error("[UpdateApplicant API] Database error:",r),p.NextResponse.json({error:r.message||"Failed to update applicant"},{status:500});return console.log("[UpdateApplicant API] Applicant updated:",s?.id),p.NextResponse.json({success:!0,applicant:s},{status:200})}catch(e){return console.error("[UpdateApplicant API] Unexpected error:",e),p.NextResponse.json({error:e.message||"Internal server error"},{status:500})}}let A=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/applicants/route",pathname:"/api/applicants",filename:"route",bundlePath:"app/api/applicants/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\applicants\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:j}=A,_="/api/applicants/route";function P(){return(0,o.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:g})}},85662:(e,t,a)=>{a.d(t,{OQ:()=>p,pR:()=>i});var s=a(76596);let r=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=process.env.SUPABASE_SERVICE_ROLE_KEY,p=null,i=null;r&&n&&(p=(0,s.eI)(r,n),i=(0,s.eI)(r,o||n))}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,5972,6596],()=>a(38965));module.exports=s})();