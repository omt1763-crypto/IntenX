"use strict";(()=>{var e={};e.id=8035,e.ids=[8035],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},70694:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>h,originalPathname:()=>b,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>m});var s={};a.r(s),a.d(s,{GET:()=>GET,dynamic:()=>i,revalidate:()=>c});var n=a(10884),o=a(16132),r=a(95798),l=a(47770);let i="force-dynamic",c=0;async function GET(e){try{console.log("[Debug API] Starting data fetch at",new Date().toISOString()),console.log("[Debug API] Fetching users...");let{data:e,error:t}=await l.pR.from("users").select("*").order("created_at",{ascending:!1});t?console.error("[Debug API] Users Error - Full details:",JSON.stringify(t,null,2)):console.log("[Debug API] Users fetched successfully:",e?.length||0,"records");let{data:a,error:s}=await l.pR.from("jobs").select("*").order("created_at",{ascending:!1});s&&console.error("[Debug API] Jobs Error:",s);let{data:n,error:o}=await l.pR.from("job_applicants").select("*").order("created_at",{ascending:!1});o&&console.error("[Debug API] Applicants Error:",o);let{data:i,error:c}=await l.pR.from("interviews").select("*").order("created_at",{ascending:!1});c&&console.error("[Debug API] Interviews Error:",c),console.log("[Debug API] Fetching subscriptions...");let{data:d,error:g}=await l.pR.from("subscriptions").select("*").order("created_at",{ascending:!1});g?console.log("[Debug API] Subscriptions table not available:",g.code):console.log("[Debug API] Subscriptions fetched:",d?.length||0,"records"),console.log("[Debug API] Fetching payments...");let{data:u,error:p}=await l.pR.from("payments").select("*").order("created_at",{ascending:!1});p?console.log("[Debug API] Payments table not available:",p.code):console.log("[Debug API] Payments fetched:",u?.length||0,"records"),console.log("[Debug API] Data Summary:"),console.log(`  Users: ${e?.length||0}`),console.log(`  Jobs: ${a?.length||0}`),console.log(`  Applicants: ${n?.length||0}`),console.log(`  Interviews: ${i?.length||0}`),console.log(`  Subscriptions: ${d?.length||0}`),console.log(`  Payments: ${u?.length||0}`);let h={};e&&e.length>0&&e.forEach(e=>{let t=i?.filter(t=>t.user_id===e.id)||[],s=a?.filter(t=>t.recruiter_id===e.id)||[],o=n?.filter(t=>t.user_id===e.id)||[],r=s.length>0&&n?.filter(e=>s.some(t=>t.id===e.job_id))||[],l=s.length>0&&i?.filter(e=>r.some(t=>t.id===e.applicant_id))||[];h[e.id]={interviews_count:"recruiter"===e.role?l.length:t.length,jobs_count:"recruiter"===e.role?s.length:0,applicants_count:"recruiter"===e.role?r.length:o.length,subscriptions_count:d?.filter(t=>t.user_id===e.id).length||0,last_activity:new Date().toISOString()},console.log(`[Debug API] User ${e.email}:`,h[e.id])});let m=0,b=0,f=0;e&&e.length>0&&(m=e.filter(e=>"recruiter"===e.role).length,b=e.filter(e=>"candidate"===e.role).length,f=e.filter(e=>"admin"===e.role).length,console.log(`[Debug API] Users breakdown: ${m} recruiters, ${b} candidates, ${f} admins`));let _={pending:0,shortlisted:0,rejected:0,accepted:0};n&&n.length>0&&(n.forEach(e=>{let t=e.status||"pending";_.hasOwnProperty(t)?_[t]++:_.pending++}),console.log("[Debug API] Application statuses:",_));let P={completed:0,pending:0,analyzed:0};i&&i.length>0&&(i.forEach(e=>{e.analysis?(P.analyzed++,P.completed++):P.pending++}),console.log("[Debug API] Interview stats:",P));let v={active:0,inactive:0,cancelled:0,pending:0},y={completed:0,pending:0,failed:0,total_amount:0};d&&d.length>0&&d.forEach(e=>{let t=e.status||"pending";v.hasOwnProperty(t)&&v[t]++}),u&&u.length>0&&u.forEach(e=>{let t=e.status||"pending";y.hasOwnProperty(t)&&y[t]++,e.amount&&(y.total_amount+=e.amount)});let w=r.Z.json({success:!0,timestamp:new Date().toISOString(),data:{users:e||[],jobs:a||[],applicants:n||[],interviews:i||[],subscriptions:d||[],payments:u||[],userStats:h||{}},stats:{users:{total:e?.length||0,recruiters:m,candidates:b,admins:f},jobs:{total:a?.length||0},applicants:{total:n?.length||0,byStatus:_},interviews:{total:i?.length||0,analyzed:P.analyzed,pending:P.pending},subscriptions:{total:d?.length||0,active:v.active,inactive:v.inactive,cancelled:v.cancelled,pending:v.pending},payments:{total:u?.length||0,completed:y.completed,pending:y.pending,failed:y.failed,totalAmount:y.total_amount}},errors:{users:t?{message:t.message,code:t.code,details:t.details,hint:t.hint}:null,jobs:s?{message:s.message,code:s.code,details:s.details,hint:s.hint}:null,applicants:o?{message:o.message,code:o.code,details:o.details,hint:o.hint}:null,interviews:c?{message:c.message,code:c.code,details:c.details,hint:c.hint}:null,subscriptions:g?{message:g.message,code:g.code}:null,payments:p?{message:p.message,code:p.code}:null}});return w.headers.set("Cache-Control","no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0"),w.headers.set("Pragma","no-cache"),w.headers.set("Expires","0"),w}catch(e){return console.error("[Debug API] Error:",e),r.Z.json({error:e.message,success:!1},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/debug/data/route",pathname:"/api/debug/data",filename:"route",bundlePath:"app/api/debug/data/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\debug\\data\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:u,serverHooks:p,headerHooks:h,staticGenerationBailout:m}=d,b="/api/debug/data/route"}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[729,5798,8617,7770],()=>__webpack_exec__(70694));module.exports=a})();