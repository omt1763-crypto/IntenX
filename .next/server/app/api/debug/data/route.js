"use strict";(()=>{var e={};e.id=8035,e.ids=[8035],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},34917:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var a={};s.r(a),s.d(a,{GET:()=>g,dynamic:()=>c,revalidate:()=>d});var n=s(49303),r=s(88716),o=s(60670),l=s(87070),i=s(85662);let c="force-dynamic",d=0;async function g(e){try{console.log("[Debug API] Starting data fetch at",new Date().toISOString()),console.log("[Debug API] Fetching users...");let{data:e,error:t}=await i.pR.from("users").select("*").order("created_at",{ascending:!1});t?console.error("[Debug API] Users Error - Full details:",JSON.stringify(t,null,2)):console.log("[Debug API] Users fetched successfully:",e?.length||0,"records");let{data:s,error:a}=await i.pR.from("jobs").select("*").order("created_at",{ascending:!1});a&&console.error("[Debug API] Jobs Error:",a);let{data:n,error:r}=await i.pR.from("job_applicants").select("*").order("created_at",{ascending:!1});r&&console.error("[Debug API] Applicants Error:",r);let{data:o,error:c}=await i.pR.from("interviews").select("*").order("created_at",{ascending:!1});c&&console.error("[Debug API] Interviews Error:",c),console.log("[Debug API] Fetching subscriptions...");let{data:d,error:g}=await i.pR.from("subscriptions").select("*").order("created_at",{ascending:!1});g?console.log("[Debug API] Subscriptions table not available:",g.code):console.log("[Debug API] Subscriptions fetched:",d?.length||0,"records"),console.log("[Debug API] Fetching payments...");let{data:u,error:p}=await i.pR.from("payments").select("*").order("created_at",{ascending:!1});p?console.log("[Debug API] Payments table not available:",p.code):console.log("[Debug API] Payments fetched:",u?.length||0,"records"),console.log("[Debug API] Data Summary:"),console.log(`  Users: ${e?.length||0}`),console.log(`  Jobs: ${s?.length||0}`),console.log(`  Applicants: ${n?.length||0}`),console.log(`  Interviews: ${o?.length||0}`),console.log(`  Subscriptions: ${d?.length||0}`),console.log(`  Payments: ${u?.length||0}`);let h={};e&&e.length>0&&e.forEach(e=>{let t=o?.filter(t=>t.user_id===e.id)||[],a=s?.filter(t=>t.recruiter_id===e.id)||[],r=n?.filter(t=>t.user_id===e.id)||[],l=a.length>0&&n?.filter(e=>a.some(t=>t.id===e.job_id))||[],i=a.length>0&&o?.filter(e=>l.some(t=>t.id===e.applicant_id))||[];h[e.id]={interviews_count:"recruiter"===e.role?i.length:t.length,jobs_count:"recruiter"===e.role?a.length:0,applicants_count:"recruiter"===e.role?l.length:r.length,subscriptions_count:d?.filter(t=>t.user_id===e.id).length||0,last_activity:new Date().toISOString()},console.log(`[Debug API] User ${e.email}:`,h[e.id])});let m=0,b=0,f=0;e&&e.length>0&&(m=e.filter(e=>"recruiter"===e.role).length,b=e.filter(e=>"candidate"===e.role).length,f=e.filter(e=>"admin"===e.role).length,console.log(`[Debug API] Users breakdown: ${m} recruiters, ${b} candidates, ${f} admins`));let v={pending:0,shortlisted:0,rejected:0,accepted:0};n&&n.length>0&&(n.forEach(e=>{let t=e.status||"pending";v.hasOwnProperty(t)?v[t]++:v.pending++}),console.log("[Debug API] Application statuses:",v));let P={completed:0,pending:0,analyzed:0};o&&o.length>0&&(o.forEach(e=>{e.analysis?(P.analyzed++,P.completed++):P.pending++}),console.log("[Debug API] Interview stats:",P));let A={active:0,inactive:0,cancelled:0,pending:0},_={completed:0,pending:0,failed:0,total_amount:0};d&&d.length>0&&d.forEach(e=>{let t=e.status||"pending";A.hasOwnProperty(t)&&A[t]++}),u&&u.length>0&&u.forEach(e=>{let t=e.status||"pending";_.hasOwnProperty(t)&&_[t]++,e.amount&&(_.total_amount+=e.amount)});let I=l.NextResponse.json({success:!0,timestamp:new Date().toISOString(),data:{users:e||[],jobs:s||[],applicants:n||[],interviews:o||[],subscriptions:d||[],payments:u||[],userStats:h||{}},stats:{users:{total:e?.length||0,recruiters:m,candidates:b,admins:f},jobs:{total:s?.length||0},applicants:{total:n?.length||0,byStatus:v},interviews:{total:o?.length||0,analyzed:P.analyzed,pending:P.pending},subscriptions:{total:d?.length||0,active:A.active,inactive:A.inactive,cancelled:A.cancelled,pending:A.pending},payments:{total:u?.length||0,completed:_.completed,pending:_.pending,failed:_.failed,totalAmount:_.total_amount}},errors:{users:t?{message:t.message,code:t.code,details:t.details,hint:t.hint}:null,jobs:a?{message:a.message,code:a.code,details:a.details,hint:a.hint}:null,applicants:r?{message:r.message,code:r.code,details:r.details,hint:r.hint}:null,interviews:c?{message:c.message,code:c.code,details:c.details,hint:c.hint}:null,subscriptions:g?{message:g.message,code:g.code}:null,payments:p?{message:p.message,code:p.code}:null}});return I.headers.set("Cache-Control","no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0"),I.headers.set("Pragma","no-cache"),I.headers.set("Expires","0"),I}catch(e){return console.error("[Debug API] Error:",e),l.NextResponse.json({error:e.message,success:!1},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/debug/data/route",pathname:"/api/debug/data",filename:"route",bundlePath:"app/api/debug/data/route"},resolvedPagePath:"C:\\Users\\omt91\\Downloads\\main\\interviewverse_frontend\\app\\api\\debug\\data\\route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:m}=u,b="/api/debug/data/route";function f(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},85662:(e,t,s)=>{s.d(t,{OQ:()=>l,pR:()=>i});var a=s(76596);let n=process.env.NEXT_PUBLIC_SUPABASE_URL,r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!n||!r)throw Error("Missing Supabase environment variables");let l=(0,a.eI)(n,r),i=(0,a.eI)(n,o||r)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,5972,6596],()=>s(34917));module.exports=a})();