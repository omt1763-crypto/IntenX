(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4963],{99743:function(e,l,t){Promise.resolve().then(t.bind(t,66084))},66084:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return f}});var s=t(57437),a=t(2265),r=t(99376),o=t(1233),n=t(2141),i=t(82240),d=t(46124),c=t(25763),x=t(54891);let u=(0,t(8301).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var m=t(71456),b=t(18512),p=t(10512),h=t(36339);function f(){let e=(0,r.useRouter)(),{user:l,session:t,loading:f}=(0,o.a)(),[g,y]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!0),[k,Z]=(0,a.useState)({headline:"",location:"",bio:"",experience_years:0,skills:[],education:[],portfolio_url:"",github_url:"",linkedin_url:""}),[C,_]=(0,a.useState)(""),[S,P]=(0,a.useState)(""),[E,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(f){console.log("⏳ Waiting for auth context...");return}if(!l||!t){console.warn("❌ Not logged in - redirecting to login"),e.push("/auth/login");return}M()},[f,l,t]);let M=async()=>{try{var e;console.log("=== Starting profile load ===");let t=l.id,s=l.email,a=(null===(e=l.user_metadata)||void 0===e?void 0:e.full_name)||(null==s?void 0:s.split("@")[0])||"User";console.log("✅ User logged in:",{currentUserId:t,currentEmail:s,currentName:a}),L(t),_(s),P(a),w(!1),n.OQ.from("candidate_profiles").select("*").eq("id",t).maybeSingle().then(e=>{let{data:l,error:t}=e;!t&&l?(console.log("✅ Profile loaded:",l),y(l),Z(l)):t?console.warn("⚠️ Database error:",t.message):console.log("No profile found - user can create one on save")}).catch(e=>console.warn("⚠️ Profile load error:",e.message))}catch(e){console.error("Error loading profile:",e),w(!1)}},U=async()=>{try{if(!E){alert("Please log in again to save your profile");return}if(console.log("Saving profile for user:",E),null==g?void 0:g.id){console.log("Updating existing profile...");let{error:e}=await n.OQ.from("candidate_profiles").update(k).eq("id",E);if(e){console.error("Update error:",e),alert("Error updating profile: "+e.message);return}console.log("✅ Profile updated")}else{console.log("Creating new profile...");let{data:e,error:l}=await n.OQ.from("candidate_profiles").insert([{id:E,...k}]).select().single();if(l){console.error("Insert error:",l),alert("Error saving profile: "+l.message);return}console.log("✅ Profile created:",e),y(e)}v(!1),alert("✅ Profile saved successfully!")}catch(e){console.error("Save error:",e),alert("Error: "+e.message)}};return f||N?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white to-cyan-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-slate-600 font-semibold",children:f?"Verifying your login...":"Loading your profile..."}),C&&(0,s.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:["Email: ",C]})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-white to-cyan-50",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"ml-64 pt-8 pb-16",children:(0,s.jsxs)("div",{className:"px-8 lg:px-12",children:[(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h1",{className:"text-5xl font-bold text-slate-900 mb-2",children:"My Profile"}),(0,s.jsx)("p",{className:"text-lg text-slate-600 font-light",children:"Manage your professional information"})]}),(0,s.jsx)("div",{className:"mb-8 rounded-3xl overflow-hidden backdrop-blur-xl bg-gradient-to-br from-white/50 to-cyan-50/30 border border-white/60 shadow-lg",children:(0,s.jsx)("div",{className:"p-8 lg:p-12",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-6 flex-1",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-24 h-24 rounded-2xl bg-gradient-to-br from-purple-500 to-cyan-400 flex items-center justify-center text-white shadow-lg",children:(0,s.jsx)(d.Z,{className:"w-12 h-12"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-slate-900",children:S||"Your Name"}),(0,s.jsx)("p",{className:"text-cyan-600 font-semibold mt-1",children:k.headline||"Add your job title"}),(0,s.jsxs)("p",{className:"text-slate-600 mt-3 flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),k.location||"Add your location"]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,s.jsx)("div",{className:"px-4 py-2 rounded-full bg-cyan-50 text-cyan-700 text-sm font-semibold",children:"★ 5 Interviews"}),(0,s.jsx)("div",{className:"px-4 py-2 rounded-full bg-purple-50 text-purple-700 text-sm font-semibold",children:"\uD83C\uDFC6 2 Certificates"})]})]})]}),(0,s.jsx)("button",{onClick:()=>v(!j),className:"p-3 rounded-xl bg-gradient-to-r from-purple-500 to-cyan-400 border border-purple-400 text-white hover:bg-cyan-500 transition-all flex items-center gap-2",children:j?(0,s.jsx)(x.Z,{className:"w-5 h-5"}):(0,s.jsx)(u,{className:"w-5 h-5"})})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,s.jsxs)("div",{className:"rounded-3xl p-8 backdrop-blur-xl bg-white/50 border border-white/60 shadow-lg",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-cyan-500"}),"Contact Information"]}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Email Address"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-slate-50 border border-slate-200",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:"email",value:C||"Loading...",disabled:!0,className:"flex-1 bg-transparent text-slate-900 outline-none font-medium"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Cannot be changed (linked to account)"})]})})]}),(0,s.jsxs)("div",{className:"rounded-3xl p-8 backdrop-blur-xl bg-white/50 border border-white/60 shadow-lg",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5 text-purple-500"}),"Professional Info"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Headline / Job Title"}),(0,s.jsx)("input",{type:"text",value:k.headline||"",onChange:e=>Z({...k,headline:e.target.value}),disabled:!j,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 text-slate-900 outline-none font-medium disabled:opacity-60",placeholder:"e.g., Senior Developer"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Location"}),(0,s.jsx)("input",{type:"text",value:k.location||"",onChange:e=>Z({...k,location:e.target.value}),disabled:!j,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 text-slate-900 outline-none font-medium disabled:opacity-60",placeholder:"City, Country"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Years of Experience"}),(0,s.jsx)("input",{type:"number",value:k.experience_years||0,onChange:e=>Z({...k,experience_years:parseInt(e.target.value)||0}),disabled:!j,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 text-slate-900 outline-none font-medium disabled:opacity-60",placeholder:"0",min:"0",max:"99"})]})]})]}),(0,s.jsxs)("div",{className:"rounded-3xl p-8 backdrop-blur-xl bg-white/50 border border-white/60 shadow-lg",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-cyan-500"}),"Links & Bio"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Portfolio URL"}),(0,s.jsx)("input",{type:"url",value:k.portfolio_url||"",onChange:e=>Z({...k,portfolio_url:e.target.value}),disabled:!j,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 text-slate-900 outline-none font-medium disabled:opacity-60",placeholder:"https://example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"GitHub URL"}),(0,s.jsx)("input",{type:"url",value:k.github_url||"",onChange:e=>Z({...k,github_url:e.target.value}),disabled:!j,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 text-slate-900 outline-none font-medium disabled:opacity-60",placeholder:"https://github.com/username"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"LinkedIn URL"}),(0,s.jsx)("input",{type:"url",value:k.linkedin_url||"",onChange:e=>Z({...k,linkedin_url:e.target.value}),disabled:!j,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 text-slate-900 outline-none font-medium disabled:opacity-60",placeholder:"https://linkedin.com/in/username"})]})]})]})]}),(0,s.jsxs)("div",{className:"rounded-3xl p-8 backdrop-blur-xl bg-white/50 border border-white/60 shadow-lg mb-8",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-purple-500"}),"About You"]}),(0,s.jsx)("div",{className:"border-2 rounded-xl overflow-hidden transition-all",style:{borderColor:j?"#7c3aed":"#e2e8f0",backgroundColor:j?"rgba(124, 58, 237, 0.05)":"#f8fafc"},children:(0,s.jsx)("textarea",{value:k.bio||"",onChange:e=>Z({...k,bio:e.target.value}),disabled:!j,className:"w-full px-4 py-3 bg-transparent text-slate-900 outline-none font-medium resize-none disabled:opacity-60",rows:"5",placeholder:"Tell us about yourself, your experience, and career goals..."})}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Share information about your professional background and interests"})]}),(0,s.jsx)("div",{className:"flex gap-4 justify-end",children:j&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{v(!1),Z(g||{})},className:"px-6 py-3 rounded-xl border-2 border-slate-300 text-slate-900 font-semibold hover:bg-slate-50 transition-all",children:"Cancel"}),(0,s.jsxs)("button",{onClick:U,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-cyan-400 border-2 border-purple-400 text-white font-semibold hover:bg-cyan-500 transition-all flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5"}),"Save Changes"]})]})})]})})]})}},10512:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});let s=(0,t(8301).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},18512:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});let s=(0,t(8301).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},71456:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});let s=(0,t(8301).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},25763:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});let s=(0,t(8301).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},36339:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});let s=(0,t(8301).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},54891:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});let s=(0,t(8301).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[9066,2240,2971,2117,1744],function(){return e(e.s=99743)}),_N_E=e.O()}]);