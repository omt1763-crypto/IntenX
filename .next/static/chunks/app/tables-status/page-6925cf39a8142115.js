(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7672],{439:function(e,t,s){Promise.resolve().then(s.bind(s,3718))},3718:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return TablesStatus}});var a=s(7437),i=s(2265),n=s(2899),l=s(2609),r=s(4115),c=s(1869);function TablesStatus(){let[e,t]=(0,i.useState)({}),[s,o]=(0,i.useState)(!0),[d,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{checkTables()},[]);let checkTables=async()=>{try{let{data:e,error:s}=await n.OQ.from("job_applicants").select("count(*)",{count:"exact",head:!0});t({job_applicants:!s||!s.message.includes("not found"),error:null==s?void 0:s.message})}catch(e){console.error("Error checking tables:",e)}finally{o(!1)}};return(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-[#f0fdf4] via-white to-[#ecfdf5] p-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-[#007a78] mb-8",children:"Database Tables Status"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-white border border-[#11cd68]/20 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"job_applicants Table"}),s?(0,a.jsx)("div",{className:"animate-spin",children:"⚙️"}):e.job_applicants?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,a.jsx)(l.Z,{size:24}),(0,a.jsx)("span",{className:"font-semibold",children:"Exists"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(r.Z,{size:24}),(0,a.jsx)("span",{className:"font-semibold",children:"Missing"})]})]}),!e.job_applicants&&!s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-slate-600 text-sm",children:["The ",(0,a.jsx)("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"job_applicants"})," table needs to be created to store candidate applications."]}),(0,a.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded p-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Steps to create:"}),(0,a.jsxs)("ol",{className:"text-sm text-slate-600 space-y-2 list-decimal list-inside",children:[(0,a.jsxs)("li",{children:["Go to ",(0,a.jsx)("a",{href:"https://app.supabase.com",target:"_blank",className:"text-blue-600 hover:underline",children:"Supabase Dashboard"})]}),(0,a.jsx)("li",{children:"Select your project"}),(0,a.jsx)("li",{children:'Click "SQL Editor" on the left sidebar'}),(0,a.jsx)("li",{children:'Click "New Query"'}),(0,a.jsx)("li",{children:"Click the button below to copy the SQL"}),(0,a.jsx)("li",{children:"Paste it in the SQL editor"}),(0,a.jsx)("li",{children:'Click "Run"'})]})]}),(0,a.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText('CREATE TABLE IF NOT EXISTS public.job_applicants (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  job_id UUID NOT NULL REFERENCES public.jobs(id) ON DELETE CASCADE,\n  name VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL,\n  position_applied VARCHAR(255),\n  status VARCHAR(50) DEFAULT \'invited\',\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE INDEX IF NOT EXISTS idx_job_applicants_job_id ON public.job_applicants(job_id);\nCREATE INDEX IF NOT EXISTS idx_job_applicants_email ON public.job_applicants(email);\nCREATE INDEX IF NOT EXISTS idx_job_applicants_status ON public.job_applicants(status);\n\nALTER TABLE public.job_applicants ENABLE ROW LEVEL SECURITY;\n\nCREATE POLICY "Allow insert applicants" ON public.job_applicants\n  FOR INSERT\n  WITH CHECK (true);\n\nCREATE POLICY "Recruiters can view applicants" ON public.job_applicants\n  FOR SELECT\n  USING (job_id IN (SELECT id FROM public.jobs WHERE recruiter_id = auth.uid()));\n\nCREATE POLICY "Update applicant status" ON public.job_applicants\n  FOR UPDATE\n  USING (true)\n  WITH CHECK (true);'),p(!0),setTimeout(()=>p(!1),2e3)},className:"w-full bg-gradient-to-r from-[#007a78] to-[#11cd68] text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(c.Z,{size:20}),d?"Copied to clipboard!":"Copy SQL to clipboard"]})]}),e.job_applicants&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:(0,a.jsx)("p",{className:"text-green-700 font-semibold",children:"✅ Table is ready! Applicants can now be saved."})})]})}),(0,a.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ How applicants work:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,a.jsx)("li",{children:"✓ Candidate visits job link → pre-onboarding page collects their details"}),(0,a.jsxs)("li",{children:["✓ Details are saved to ",(0,a.jsx)("code",{className:"bg-white px-1 rounded",children:"job_applicants"})," table"]}),(0,a.jsx)("li",{children:"✓ Recruiter can see all applicants in dashboard"}),(0,a.jsx)("li",{children:"✓ Interview status updates when candidate completes interview"})]})]})]})})}},2899:function(e,t,s){"use strict";s.d(t,{OQ:function(){return c}});var a=s(6932),i=s(2601);let n=i.env.NEXT_PUBLIC_SUPABASE_URL,l=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,r=i.env.SUPABASE_SERVICE_ROLE_KEY;if(!n||!l)throw Error("Missing Supabase environment variables");let c=(0,a.eI)(n,l);(0,a.eI)(n,r||l)},7865:function(e,t,s){"use strict";s.d(t,{Z:function(){return createLucideIcon$1}});var a=s(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var createLucideIcon$1=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:r,children:c,...o},d)=>(0,a.createElement)("svg",{ref:d,...i,width:n,height:n,stroke:s,strokeWidth:r?24*Number(l)/Number(n):l,className:`lucide lucide-${toKebabCase(e)}`,...o},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(c)?c:[c])||[]]));return s.displayName=`${e}`,s}},4115:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7865);let i=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2609:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7865);let i=(0,a.Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1869:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7865);let i=(0,a.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])}},function(e){e.O(0,[7653,2971,2472,1744],function(){return e(e.s=439)}),_N_E=e.O()}]);