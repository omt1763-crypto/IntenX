(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2048],{870:function(e,s,t){Promise.resolve().then(t.bind(t,6941))},6941:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var r=t(7437),a=t(2265),l=t(9376),n=t(3287),i=t(8279),o=t(8399),d=t(1914),c=t(7367),u=t(7648),x=t(2141);function h(){let[e,s]=(0,a.useState)(!1),[t,h]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[w,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[N,v]=(0,a.useState)("checking"),k=(0,l.useRouter)();(0,a.useEffect)(()=>{s(!0)},[]),(0,a.useEffect)(()=>{e&&(async()=>{try{let e=window.location.hash;if(!e){v("expired"),b("Invalid reset link. Please request a new one.");return}let s=new URLSearchParams(e.substring(1)),t=s.get("access_token"),r=s.get("type");if(!t||"recovery"!==r){v("expired"),b("Invalid reset link. Please request a new one.");return}let{error:a}=await x.OQ.auth.setSession({access_token:t,refresh_token:s.get("refresh_token")});if(a){v("expired"),b("Reset link has expired. Please request a new one.");return}v("ready")}catch(e){console.error("[ResetPassword] Error checking link:",e),v("expired"),b("Invalid reset link. Please request a new one.")}})()},[e]);let P=async e=>{if(e.preventDefault(),b(""),g(!0),!t||!p){b("Please fill in all fields"),g(!1);return}if(t.length<6){b("Password must be at least 6 characters"),g(!1);return}if(t!==p){b("Passwords do not match"),g(!1);return}try{console.log("[ResetPassword] Updating password...");let{error:e}=await x.OQ.auth.updateUser({password:t});if(e){console.error("[ResetPassword] Update error:",e),b(e.message||"Failed to reset password"),g(!1);return}console.log("[ResetPassword] Password updated successfully"),v("success"),j(!0),h(""),m(""),setTimeout(()=>{k.push("/auth/login?message=Password%20reset%20successfully.%20You%20can%20now%20log%20in.")},3e3)}catch(e){console.error("[ResetPassword] Error:",e),b(e.message||"Failed to reset password")}g(!1)};return e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),(0,r.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md relative z-10",children:"checking"===N?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-400",children:"Verifying reset link..."})]}):"expired"===N?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"w-16 h-16 bg-red-500/20 border border-red-500/30 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(i.Z,{size:32,className:"text-red-400"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Link Expired"}),(0,r.jsx)("p",{className:"text-slate-400 mb-6",children:f||"This password reset link has expired."}),(0,r.jsxs)(u.default,{href:"/auth/forgot-password",className:"inline-flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition",children:["Request New Link",(0,r.jsx)(o.Z,{size:18})]})]}):y?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"w-16 h-16 bg-green-500/20 border border-green-500/30 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(d.Z,{size:32,className:"text-green-400"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Password Reset"}),(0,r.jsx)("p",{className:"text-slate-400 mb-6",children:"Your password has been reset successfully. You'll be redirected to login shortly."}),(0,r.jsxs)(u.default,{href:"/auth/login",className:"inline-flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition",children:["Go to Login",(0,r.jsx)(o.Z,{size:18})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Set New Password"}),(0,r.jsx)("p",{className:"text-slate-400",children:"Enter a new password to secure your account."})]}),(0,r.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),(0,r.jsx)("input",{type:"password",value:t,onChange:e=>h(e.target.value),placeholder:"At least 6 characters",className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 transition",disabled:w})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Confirm Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),(0,r.jsx)("input",{type:"password",value:p,onChange:e=>m(e.target.value),placeholder:"Confirm your password",className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 transition",disabled:w})]})]}),f&&(0,r.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-400 text-sm",children:f})}),(0,r.jsx)("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg transition flex items-center justify-center gap-2",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Resetting..."]}):(0,r.jsxs)(r.Fragment,{children:["Reset Password",(0,r.jsx)(o.Z,{size:18})]})})]}),(0,r.jsxs)("p",{className:"text-center text-slate-400 mt-6",children:["Remember your password?"," ",(0,r.jsx)(u.default,{href:"/auth/login",className:"text-purple-400 hover:text-purple-300 font-semibold transition",children:"Log in here"})]})]})})]}):null}},2141:function(e,s,t){"use strict";t.d(s,{OQ:function(){return o}});var r=t(9066),a=t(257);let l=a.env.NEXT_PUBLIC_SUPABASE_URL,n=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=a.env.SUPABASE_SERVICE_ROLE_KEY;if(!l||!n)throw Error("Missing Supabase environment variables");let o=(0,r.eI)(l,n);(0,r.eI)(l,i||n)},8279:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8301).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8399:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8301).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1914:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8301).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},7367:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8301).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},function(e){e.O(0,[9066,1341,3287,2971,2117,1744],function(){return e(e.s=870)}),_N_E=e.O()}]);