(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2616],{4213:function(e,r,t){Promise.resolve().then(t.bind(t,553))},553:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var i=t(7437),s=t(2265),a=t(9376),l=t(3287),n=t(6367),o=t(1914),c=t(8279),d=t(7648),u=t(2141);function m(){let e=(0,a.useRouter)(),[r,t]=(0,s.useState)("verifying"),[m,f]=(0,s.useState)("Verifying your email..."),[h,x]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{x(!0)},[]),(0,s.useEffect)(()=>{h&&(async()=>{try{t("verifying"),f("Verifying your email address...");let i=window.location.hash;if(console.log("[VerifyEmail] URL hash:",i),i){let s=new URLSearchParams(i.substring(1)),a=s.get("access_token"),l=s.get("type");if(console.log("[VerifyEmail] Extracted from hash - type:",l,"has token:",!!a),a&&"signup"===l){var r;console.log("[VerifyEmail] Processing Supabase signup verification");let{data:{session:i},error:l}=await u.OQ.auth.getSession();if((l||!i)&&(console.error("[VerifyEmail] Session error:",l),a)){let{data:e,error:r}=await u.OQ.auth.setSession({access_token:a,refresh_token:s.get("refresh_token")});if(r)throw r}let{data:{user:n},error:o}=await u.OQ.auth.getUser();if(o||!n){console.error("[VerifyEmail] User fetch error:",o),t("error"),f("Error retrieving user information. Please try signing up again.");return}console.log("[VerifyEmail] User verified:",n.id,"email verified:",null===(r=n.user_metadata)||void 0===r?void 0:r.email_verified),t("success"),f("Email verified successfully! \uD83C\uDF89"),setTimeout(()=>{e.push("/auth/login?message=Email%20verified.%20You%20can%20now%20log%20in.")},2e3)}else a?(t("error"),f("This link is for a different type of request. Please check your email.")):(t("error"),f("Invalid verification link. Please check your email for the correct link."))}else t("error"),f("Invalid verification link. Please check your email for the correct link.")}catch(e){console.error("[VerifyEmail] Error during verification:",e),t("error"),f("Error verifying email: "+e.message)}})()},[h,e]),h)?(0,i.jsxs)("div",{className:"min-h-screen bg-white text-black flex items-center justify-center px-6 py-12 relative overflow-x-hidden",style:{background:"linear-gradient(180deg, #F6F1FC 0%, #FADCEC 50%, #E0C3FC 100%)"},children:[(0,i.jsx)(d.default,{href:"/",className:"absolute top-8 left-8 z-50",children:(0,i.jsx)(l.E.button,{whileHover:{scale:1.05},className:"p-2 rounded-full bg-white/70 border border-purple-300/40 hover:border-purple-500 transition-all",children:(0,i.jsx)(n.Z,{className:"w-5 h-5 text-[#007a78]"})})}),(0,i.jsx)(l.E.div,{className:"w-full max-w-md relative z-10",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},initial:"hidden",animate:"visible",children:(0,i.jsxs)("div",{className:"rounded-3xl border border-purple-200/40 p-8 backdrop-blur-2xl bg-white/80 shadow-2xl",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:["verifying"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.E.div,{className:"inline-block p-4 rounded-full bg-blue-100 mb-4",animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,i.jsx)("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Verifying Email"})]}),"success"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.E.div,{className:"inline-block p-4 rounded-full bg-green-100 mb-4",animate:{scale:[.8,1,1]},transition:{duration:.5},children:(0,i.jsx)(o.Z,{className:"w-8 h-8 text-green-600"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Email Verified!"})]}),"error"===r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.E.div,{className:"inline-block p-4 rounded-full bg-red-100 mb-4",animate:{scale:[.8,1,1]},transition:{duration:.5},children:(0,i.jsx)(c.Z,{className:"w-8 h-8 text-red-600"})}),(0,i.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Verification Failed"})]})]}),(0,i.jsx)("div",{className:"text-center mb-8",children:(0,i.jsx)("p",{className:"text-base text-slate-600",children:m})}),"verifying"===r&&(0,i.jsx)("div",{className:"p-4 rounded-lg bg-blue-50 border border-blue-200 mb-6",children:(0,i.jsx)("p",{className:"text-sm text-center text-slate-700",children:"Please wait while we verify your email..."})}),"success"===r&&(0,i.jsxs)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-green-50 border border-green-200 mb-6",children:[(0,i.jsx)("p",{className:"text-sm text-center text-green-700",children:"✅ Your email has been verified successfully!"}),(0,i.jsx)("p",{className:"text-xs text-center text-green-600 mt-2",children:"Redirecting to login page..."})]}),"error"===r&&(0,i.jsxs)(l.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-lg bg-red-50 border border-red-200 mb-6",children:[(0,i.jsxs)("p",{className:"text-sm text-red-700",children:["❌ ",m]}),(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsx)(d.default,{href:"/auth/signup",className:"block px-4 py-2 bg-red-600 text-white rounded-lg text-center font-semibold hover:bg-red-700 transition",children:"Try Again with New Email"}),(0,i.jsx)(d.default,{href:"/auth/login",className:"block px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-center font-semibold hover:bg-slate-300 transition",children:"Back to Login"})]})]}),"success"===r&&(0,i.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"space-y-3",children:(0,i.jsx)(d.default,{href:"/auth/login",className:"block px-4 py-3 bg-gradient-to-r from-purple-600 to-cyan-600 text-white rounded-full text-center font-semibold hover:shadow-lg transition",children:"Go to Login →"})}),(0,i.jsxs)("p",{className:"text-xs text-slate-500 text-center mt-6",children:["By completing email verification, you agree to our"," ",(0,i.jsx)(d.default,{href:"#",className:"hover:text-[#11cd68] transition",children:"Terms of Service"})]})]})})]}):null}},2141:function(e,r,t){"use strict";t.d(r,{OQ:function(){return o}});var i=t(9066),s=t(257);let a=s.env.NEXT_PUBLIC_SUPABASE_URL,l=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,n=s.env.SUPABASE_SERVICE_ROLE_KEY;if(!a||!l)throw Error("Missing Supabase environment variables");let o=(0,i.eI)(a,l);(0,i.eI)(a,n||l)},8279:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});let i=(0,t(8301).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6367:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});let i=(0,t(8301).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1914:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});let i=(0,t(8301).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])}},function(e){e.O(0,[9066,1341,3287,2971,2117,1744],function(){return e(e.s=4213)}),_N_E=e.O()}]);