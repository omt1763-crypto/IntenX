(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6170],{33280:function(e,t,s){Promise.resolve().then(s.bind(s,5566))},5566:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var l=s(57437),a=s(2265),i=s(99376),n=s(1233),o=s(18985),r=s(65274),d=s(78279),c=s(71456),m=s(38470);function h(){var e,t;let s=(0,i.useRouter)(),h=(0,i.useParams)(),{user:x,isAuthenticated:p,isHydrated:u}=(0,n.a)(),[g,b]=(0,a.useState)(null),[v,f]=(0,a.useState)(!0),[j,N]=(0,a.useState)(!1),[w,y]=(0,a.useState)(null),[k,A]=(0,a.useState)(!1),C=null==h?void 0:h.applicantId;null==x||x.id,(0,a.useEffect)(()=>{N(!0),console.log("[ApplicantDetail] Mounted with params:",h)},[]),(0,a.useEffect)(()=>{C&&j&&u&&(console.log("[ApplicantDetail] Loading interview data..."),D())},[C,u,j]),(0,a.useEffect)(()=>{j&&u&&!x&&!v&&!g&&k&&(console.log("[ApplicantDetail] No authUser and no data available, redirecting to login"),s.push("/auth/login"))},[u,x,j,v,g,k]);let D=async()=>{try{let e=await fetch("/api/interview-detail?applicantId=".concat(C)),t=await e.json();t.data?(b(t.data),A(!1),t.data.analysis?(y(t.data.analysis),console.log("[ApplicantDetail] Using stored AI analysis:",t.data.analysis)):(S(t.data),console.log("[ApplicantDetail] No AI analysis found, generating assessment...")),console.log("[ApplicantDetail] Interview loaded:",t.data)):t.error&&(console.warn("[ApplicantDetail] No interview found:",t.error),A(!0),b(null))}catch(e){console.error("[ApplicantDetail] Error loading interview:",e),A(!0)}finally{f(!1)}},S=e=>{var t,s,l,a;let i=0,n=0,o=0,r=(null===(t=e.conversation)||void 0===t?void 0:t.filter(e=>"user"===e.role))||[],d=((null===(s=e.conversation)||void 0===s?void 0:s.filter(e=>"ai"===e.role||"assistant"===e.role))||[]).length,c=r.length,m=d>0?c/d:0,h=r.map(e=>{var t;return(null===(t=e.content)||void 0===t?void 0:t.toLowerCase())||""}).join(" ");null===(l=e.conversation)||void 0===l||l.map(e=>{var t;return(null===(t=e.content)||void 0===t?void 0:t.toLowerCase())||""}).join(" "),console.log("[Assessment] Completion rate:",m.toFixed(2),"(".concat(c,"/").concat(d,")"));let x=0;m>=.95?x+=30:m>=.8?x+=25:m>=.6?x+=15:m>=.4&&(x+=8);let p=["tell me more","can you explain","what about","how did","why did","what was","could you"].filter(e=>h.includes(e)).length;p>=3?x+=20:p>=2?x+=12:p>=1&&(x+=5);let u=r.reduce((e,t)=>{var s;return e+((null===(s=t.content)||void 0===s?void 0:s.length)||0)},0)/Math.max(r.length,1);r.map(e=>{var t;return(null===(t=e.content)||void 0===t?void 0:t.length)||0}).filter(e=>e>0).length>=3&&u>80&&(x+=10),console.log("[Assessment] Drive & Initiative:",n=Math.min(60,x),"/60");let g=0,b=(h.match(/\d+/g)||[]).length;b>=5?g+=35:b>=3?g+=25:b>=1&&(g+=10);let v=["python","javascript","react","node","sql","mongodb","aws","docker","kubernetes","api","rest","graphql","typescript","java","c++","golang","rust"].filter(e=>h.includes(e)).length;v>=3?g+=20:v>=2?g+=12:v>=1&&(g+=5);let f=["i built","i created","i led","i designed","i implemented","i developed","i architected","i launched","my team","we built"].filter(e=>h.includes(e)).length;f>=3?g+=15:f>=2?g+=10:f>=1&&(g+=5);let j=["result","impact","improved","increased","reduced","performance","shipped","launched","delivered"].filter(e=>h.includes(e)).length;j>=3?g+=10:j>=1&&(g+=5),console.log("[Assessment] Relevant Accomplishments:",i=Math.min(80,g),"/80");let N=0,w=["first","then","next","after that","step","process","approach","method","strategy","started with","began by"].filter(e=>h.includes(e)).length;w>=4?N+=35:w>=3?N+=25:w>=2?N+=15:w>=1&&(N+=5);let k=["constraint","trade-off","challenge","limitation","difficult","problem was","had to","instead of","but","however","tradeoff"].filter(e=>h.includes(e)).length;k>=4?N+=30:k>=3?N+=22:k>=2?N+=12:k>=1&&(N+=5);let A=["learned","lesson","would do","in retrospect","could have","successful because","failed because","what worked","what didn't"].filter(e=>h.includes(e)).length;A>=3?N+=25:A>=2?N+=15:A>=1&&(N+=8),console.log("[Assessment] Problem Solving:",o=Math.min(90,N),"/90");let C=Math.round((i+n+o)/3);y({jobSuitability:C,relevantAccomplishments:i,driveInitiative:n,problemSolving:o,cultureScopes:60,leadershipInfluence:55,userMessageCount:r.length,skillsCount:(null===(a=e.skills)||void 0===a?void 0:a.length)||0,avgResponseLength:Math.round(r.reduce((e,t)=>{var s;return e+((null===(s=t.content)||void 0===s?void 0:s.length)||0)},0)/Math.max(r.length,1)),summary:Z(n,i,o),recommendation:C>=70?"Strong Candidate":C>=50?"Consider for Interview":"Do Not Hire"})},Z=(e,t,s)=>{let l=e+t+s;return l<80?"Candidate showed limited evidence of drive, accomplishments, and problem-solving ability. Few concrete examples or reasoning steps demonstrated.":l<140?"Candidate provided some evidence of capabilities but responses lacked depth. Limited ownership language and few specific examples with metrics.":l<180?"Candidate demonstrated solid engagement with concrete examples and some evidence of accomplishments. Good communication of experiences with room for improvement in reasoning depth.":l<200?"Candidate showed strong drive and initiative with specific, detailed examples of accomplishments. Demonstrated clear problem-solving approach and trade-off considerations.":"Exceptional candidate with high drive, detailed accomplishment descriptions with metrics, and strong reasoning skills. Excellent understanding of constraints and clear communication."},I=async e=>{if(C)try{f(!0);let t=await fetch("/api/applicants",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantId:C,status:e})}),s=await t.json();t.ok?(console.log("[ApplicantDetail] Status updated to",e,s.applicant),await D()):console.error("[ApplicantDetail] Failed to update status",s)}catch(e){console.error("[ApplicantDetail] Error updating status:",e)}finally{f(!1)}},M=e=>"".concat(Math.floor(e/60),"m ").concat(e%60,"s");return j?u?!u||p||g||v?(0,l.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,l.jsx)(o.Z,{role:"company"}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto ml-64",children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 shadow-sm",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)(r.Z,{}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:(null==g?void 0:g.name)||"Loading..."})]})}),(0,l.jsx)("div",{className:"p-6 max-w-6xl",children:v?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading interview data..."})]}):k?(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[(0,l.jsx)(d.Z,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Interview Found"}),(0,l.jsx)("p",{className:"text-slate-600 mb-6",children:"This applicant has not completed an interview yet."}),(0,l.jsx)("button",{onClick:()=>window.history.back(),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go Back"})]}):g?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Interview Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Applied For"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:g.position})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Interviewed On"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:new Date(g.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-4 h-4"}),"Email"]}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:g.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4"}),"Interview Duration"]}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:M(g.duration)})]})]})]}),w&&(0,l.jsxs)("div",{className:"".concat((e=w.jobSuitability)>=70?"bg-green-50":e>=50?"bg-yellow-50":"bg-red-50"," rounded-lg border border-slate-200 p-6"),children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Job Suitability Analysis"}),(0,l.jsxs)("div",{className:"flex items-end gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-5xl font-bold ".concat((t=w.jobSuitability)>=70?"text-green-600":t>=50?"text-yellow-600":"text-red-600"),children:[w.jobSuitability,"%"]}),(0,l.jsxs)("p",{className:"text-sm text-slate-600 mt-2",children:[g.duration||0,"s interview"]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Recommendation"}),(0,l.jsx)("p",{className:"text-lg font-bold ".concat("Consider for Interview"===w.recommendation?"text-green-600":"text-red-600"),children:w.recommendation})]})]}),(0,l.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Relevant Accomplishments"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[w.relevantAccomplishments,"%"]})]}),(0,l.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Drive & Initiative"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[w.driveInitiative,"%"]})]}),(0,l.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Problem Solving"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[w.problemSolving,"%"]})]})]}),(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Assessment Summary"}),(0,l.jsx)("p",{className:"text-slate-700",children:w.summary})]}),(0,l.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600",children:"Total Responses"}),(0,l.jsx)("p",{className:"text-lg font-bold text-slate-900",children:w.userMessageCount})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600",children:"Skills Discussed"}),(0,l.jsx)("p",{className:"text-lg font-bold text-slate-900",children:w.skillsCount})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600",children:"Avg Response Length"}),(0,l.jsxs)("p",{className:"text-lg font-bold text-slate-900",children:[w.avgResponseLength," chars"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-slate-600",children:"Duration"}),(0,l.jsx)("p",{className:"text-lg font-bold text-slate-900",children:M(g.duration)})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>I("shortlisted"),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold",disabled:v,children:"Shortlist Candidate"}),(0,l.jsx)("button",{onClick:()=>I("rejected"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-semibold",disabled:v,children:"Reject Candidate"})]})]}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(d.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-600",children:"No data available"})]})})]})]}):(console.log("[ApplicantDetail] Auth failed and no data loaded, redirecting to login"),null):(0,l.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,l.jsx)(o.Z,{role:"company"}),(0,l.jsx)("div",{className:"flex-1 overflow-auto ml-64 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading..."})]})})]}):null}},65274:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var l=s(57437),a=s(99376),i=s(52009),n=s(41119);function o(){let e=(0,a.useRouter)(),t=(0,a.usePathname)();if("/candidate/dashboard"===t||"/recruiter/dashboard"===t||"/business/dashboard"===t)return null;let s=(()=>{let e=t.split("/").filter(Boolean);if(e.length<=2)return[];let s=[];if("candidate"===e[0]?s.push({label:"Dashboard",path:"/candidate/dashboard",icon:"home"}):"recruiter"===e[0]?s.push({label:"Dashboard",path:"/recruiter/dashboard",icon:"home"}):"business"===e[0]&&s.push({label:"Dashboard",path:"/business/dashboard",icon:"home"}),e.length>2){let t=e[2],l={practice:"Practice Types",skills:"Skills Map",resume:"Resume Analysis",certificates:"Certificates",profile:"My Profile",activity:"Activity",billing:"Billing",history:"Interview History",applicants:"Applicants",jobs:"Jobs",detail:"Applicant Details"};l[t]&&s.push({label:l[t],path:"/".concat(e[0],"/dashboard/").concat(t),icon:"document"})}return s})();return 0===s.length?null:(0,l.jsx)("div",{className:"flex items-center gap-1 text-sm text-slate-600 mb-6",children:s.map((t,a)=>(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("button",{onClick:()=>e.push(t.path),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-200/50 hover:text-slate-900 transition-all duration-200 font-medium text-slate-700 hover:font-semibold",children:["home"===t.icon&&(0,l.jsx)(i.Z,{className:"w-4 h-4"}),t.label]}),a<s.length-1&&(0,l.jsx)(n.Z,{className:"w-4 h-4 text-slate-400"})]},t.path))})}},41119:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},38470:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},52009:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},71456:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[9066,1341,8985,2971,2117,1744],function(){return e(e.s=33280)}),_N_E=e.O()}]);