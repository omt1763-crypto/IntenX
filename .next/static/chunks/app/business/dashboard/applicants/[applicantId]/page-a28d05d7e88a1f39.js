(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6170],{4761:function(e,t,s){Promise.resolve().then(s.bind(s,9360))},9360:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ApplicantDetailPage}});var a=s(7437),l=s(2265),n=s(4033),i=s(4678),r=s(4102),o=s(907),d=s(4115),c=s(8144),h=s(8523);function ApplicantDetailPage(){var e,t;(0,n.useRouter)();let s=(0,n.useParams)(),{user:m,isAuthenticated:x}=(0,i.useAuth)(),[u,p]=(0,l.useState)(null),[g,b]=(0,l.useState)(!0),[v,f]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[y,w]=(0,l.useState)(!1),k=null==s?void 0:s.applicantId,A=null==m?void 0:m.id;(0,l.useEffect)(()=>{f(!0),console.log("[ApplicantDetail] Mounted with params:",s),k&&A&&x&&(console.log("[ApplicantDetail] Loading interview for applicantId:",k),loadInterviewData())},[k,A,x]);let loadInterviewData=async()=>{try{let e=await fetch("/api/interview-detail?applicantId=".concat(k)),t=await e.json();t.data?(p(t.data),w(!1),t.data.analysis?(N(t.data.analysis),console.log("[ApplicantDetail] Using stored AI analysis:",t.data.analysis)):(generateAssessment(t.data),console.log("[ApplicantDetail] No AI analysis found, generating assessment...")),console.log("[ApplicantDetail] Interview loaded:",t.data)):t.error&&(console.warn("[ApplicantDetail] No interview found:",t.error),w(!0),p(null))}catch(e){console.error("[ApplicantDetail] Error loading interview:",e),w(!0)}finally{b(!1)}},generateAssessment=e=>{var t,s,a,l;null===(t=e.conversation)||void 0===t||t.length;let n=(null===(s=e.skills)||void 0===s?void 0:s.length)||0;e.duration;let i=0,r=0,o=0,d=(null===(a=e.conversation)||void 0===a?void 0:a.filter(e=>"user"===e.role))||[],c=(null===(l=e.conversation)||void 0===l?void 0:l.filter(e=>"ai"===e.role||"assistant"===e.role))||[];console.log("[Assessment] User messages:",d.length,"AI messages:",c.length),d.length>8?r=80:d.length>5?r=60:d.length>2?r=40:d.length>0&&(r=20);let h=d.reduce((e,t)=>{var s;return e+((null===(s=t.content)||void 0===s?void 0:s.length)||0)},0)/Math.max(d.length,1);h>200?i=70:h>100?i=50:h>50?i=30:d.length>0&&(i=15),n>5?o=75:n>3?o=55:n>1?o=35:n>0&&(o=20);let m=Math.round((i+r+o)/3);N({jobSuitability:m,relevantAccomplishments:i,driveInitiative:r,problemSolving:o,cultureScopes:30,leadershipInfluence:25,userMessageCount:d.length,skillsCount:n,avgResponseLength:Math.round(h),summary:generateSummary(d.length,e),recommendation:m>50?"Consider for Interview":"Do Not Hire"})},generateSummary=(e,t)=>0===e?"Candidate ended interview immediately without engaging, demonstrating very low motivation and questionable professionalism.":e<3?"Candidate showed minimal engagement during the interview with very few responses. Limited information available to assess job-related competencies.":e<5?"Candidate demonstrated moderate engagement during the interview. Some substantive responses provided but needs further evaluation.":e<8?"Candidate demonstrated good engagement throughout the interview with multiple thoughtful responses. Shows competency in several areas.":"Candidate demonstrated strong engagement with consistent, detailed responses throughout the interview. Showed good understanding of role requirements and strong communication skills.",updateApplicantStatus=async e=>{if(k)try{b(!0);let t=await fetch("/api/applicants",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantId:k,status:e})}),s=await t.json();t.ok?(console.log("[ApplicantDetail] Status updated to",e,s.applicant),await loadInterviewData()):console.error("[ApplicantDetail] Failed to update status",s)}catch(e){console.error("[ApplicantDetail] Error updating status:",e)}finally{b(!1)}},formatDuration=e=>"".concat(Math.floor(e/60),"m ").concat(e%60,"s");return v&&x?(0,a.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,a.jsx)(r.Z,{role:"company"}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto ml-64",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:(null==u?void 0:u.name)||"Loading..."})]})}),(0,a.jsx)("div",{className:"p-6 max-w-6xl",children:g?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading interview data..."})]}):y?(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Interview Found"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"This applicant has not completed an interview yet."}),(0,a.jsx)("button",{onClick:()=>window.history.back(),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go Back"})]}):u?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Interview Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Applied For"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:u.position})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Interviewed On"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:new Date(u.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Email"]}),(0,a.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:u.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Interview Duration"]}),(0,a.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:formatDuration(u.duration)})]})]})]}),j&&(0,a.jsxs)("div",{className:"".concat((e=j.jobSuitability)>=70?"bg-green-50":e>=50?"bg-yellow-50":"bg-red-50"," rounded-lg border border-slate-200 p-6"),children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Job Suitability Analysis"}),(0,a.jsxs)("div",{className:"flex items-end gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-5xl font-bold ".concat((t=j.jobSuitability)>=70?"text-green-600":t>=50?"text-yellow-600":"text-red-600"),children:[j.jobSuitability,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-600 mt-2",children:[u.duration||0,"s interview"]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Recommendation"}),(0,a.jsx)("p",{className:"text-lg font-bold ".concat("Consider for Interview"===j.recommendation?"text-green-600":"text-red-600"),children:j.recommendation})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Relevant Accomplishments"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[j.relevantAccomplishments,"%"]})]}),(0,a.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Drive & Initiative"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[j.driveInitiative,"%"]})]}),(0,a.jsxs)("div",{className:"bg-white/50 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Problem Solving"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-slate-900",children:[j.problemSolving,"%"]})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Assessment Summary"}),(0,a.jsx)("p",{className:"text-slate-700",children:j.summary})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Total Responses"}),(0,a.jsx)("p",{className:"text-lg font-bold text-slate-900",children:j.userMessageCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Skills Discussed"}),(0,a.jsx)("p",{className:"text-lg font-bold text-slate-900",children:j.skillsCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Avg Response Length"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-slate-900",children:[j.avgResponseLength," chars"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Duration"}),(0,a.jsx)("p",{className:"text-lg font-bold text-slate-900",children:formatDuration(u.duration)})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>updateApplicantStatus("shortlisted"),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold",disabled:g,children:"Shortlist Candidate"}),(0,a.jsx)("button",{onClick:()=>updateApplicantStatus("rejected"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-semibold",disabled:g,children:"Reject Candidate"})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"No data available"})]})})]})]}):null}},907:function(e,t,s){"use strict";s.d(t,{Z:function(){return DashboardBreadcrumb}});var a=s(7437),l=s(4033),n=s(160),i=s(4213);function DashboardBreadcrumb(){let e=(0,l.useRouter)(),t=(0,l.usePathname)();if("/candidate/dashboard"===t||"/recruiter/dashboard"===t||"/business/dashboard"===t)return null;let s=(()=>{let e=t.split("/").filter(Boolean);if(e.length<=2)return[];let s=[];if("candidate"===e[0]?s.push({label:"Dashboard",path:"/candidate/dashboard",icon:"home"}):"recruiter"===e[0]?s.push({label:"Dashboard",path:"/recruiter/dashboard",icon:"home"}):"business"===e[0]&&s.push({label:"Dashboard",path:"/business/dashboard",icon:"home"}),e.length>2){let t=e[2],a={practice:"Practice Types",skills:"Skills Map",resume:"Resume Analysis",certificates:"Certificates",profile:"My Profile",activity:"Activity",billing:"Billing",history:"Interview History",applicants:"Applicants",jobs:"Jobs",detail:"Applicant Details"};a[t]&&s.push({label:a[t],path:"/".concat(e[0],"/dashboard/").concat(t),icon:"document"})}return s})();return 0===s.length?null:(0,a.jsx)("div",{className:"flex items-center gap-1 text-sm text-slate-600 mb-6",children:s.map((t,l)=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("button",{onClick:()=>e.push(t.path),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-200/50 hover:text-slate-900 transition-all duration-200 font-medium text-slate-700 hover:font-semibold",children:["home"===t.icon&&(0,a.jsx)(n.Z,{className:"w-4 h-4"}),t.label]}),l<s.length-1&&(0,a.jsx)(i.Z,{className:"w-4 h-4 text-slate-400"})]},t.path))})}},6788:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3731:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},4213:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8523:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},160:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},8144:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[7653,9292,4102,2971,2472,1744],function(){return e(e.s=4761)}),_N_E=e.O()}]);