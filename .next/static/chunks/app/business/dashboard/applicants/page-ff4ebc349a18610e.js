(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6413],{241:function(e,t,s){Promise.resolve().then(s.bind(s,7059))},7059:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var l=s(7437),a=s(2265),r=s(9376),n=s(1233),i=s(9358),c=s(8985),o=s(5795),d=s(8470),p=s(6680),u=s(6367),x=s(1338),m=s(2643),h=s(9150),b=s(8512);function j(){let e=(0,r.useRouter)(),{user:t,isAuthenticated:s,isHydrated:j}=(0,n.a)(),{isOpen:f}=(0,i.A)(),[g,v]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[y,C]=(0,a.useState)(!0),[Z,k]=(0,a.useState)(!1),[A,S]=(0,a.useState)(new Set),[L,B]=(0,a.useState)(""),[E,_]=(0,a.useState)(""),[D,z]=(0,a.useState)(!1),I=null==t?void 0:t.id;(0,a.useEffect)(()=>{k(!0)},[]),(0,a.useEffect)(()=>{Z&&j&&!t&&!D&&(localStorage.getItem("authState")?console.log("[BusinessApplicants] Auth data exists in localStorage, not redirecting"):(console.log("[BusinessApplicants] No authentication found, redirecting to login"),z(!0),e.push("/auth/login")))},[j,Z,D,t]),(0,a.useEffect)(()=>{I&&Z&&O()},[I,Z]);let O=async()=>{try{if(!I)return;console.log("[BusinessApplicants] Loading applicants for company:",I);let e=await fetch("/api/get-applicants?recruiterId=".concat(I)),t=await e.json();if(console.log("[BusinessApplicants] Applicants API response:",t),t.data&&Array.isArray(t.data)){console.log("[BusinessApplicants] Found",t.data.length,"applicants"),v(t.data);let e=P(t.data);console.log("[BusinessApplicants] Grouped by job:",e),w(e),S(new Set(e.map(e=>e.job.id))),console.log("[BusinessApplicants] Applicants loaded:",t.data.length)}}catch(e){console.error("[BusinessApplicants] Error loading applicants:",e)}finally{C(!1)}},P=e=>{let t={};return e.forEach(e=>{let s=e.job_id;if(!t[s]){var l,a,r;t[s]={job:{id:(null===(l=e.jobs)||void 0===l?void 0:l.id)||s,title:(null===(a=e.jobs)||void 0===a?void 0:a.title)||"Unknown Job",company:(null===(r=e.jobs)||void 0===r?void 0:r.company)||"Unknown Company"},applicants:[],expanded:!0}}t[s].applicants.push(e)}),Object.values(t).sort((e,t)=>e.job.title.localeCompare(t.job.title))},U=e=>{let t=new Set(A);t.has(e)?t.delete(e):t.add(e),S(t)},q=e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":case"interviewed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"shortlisted":return"bg-purple-100 text-purple-800";case"applied":case"reviewing":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}},R=e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":case"interviewed":return(0,l.jsx)(o.Z,{className:"w-5 h-5 text-green-600"});case"in-progress":return(0,l.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"});case"rejected":return(0,l.jsx)(p.Z,{className:"w-5 h-5 text-red-600"});default:return(0,l.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600"})}},M=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=e=>e.applicants.filter(e=>{var t,s;return(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())==="interviewed"||(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())==="completed"}).length;if(!Z)return null;if(!j)return(0,l.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,l.jsx)(c.Z,{role:"business"}),(0,l.jsx)("div",{className:"flex-1 overflow-auto flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading..."})]})})]});if(!t)return null;let G=(()=>{let e={completed:0,"in-progress":0,rejected:0,pending:0};return g.forEach(t=>{var s;let l=null===(s=t.status)||void 0===s?void 0:s.toLowerCase();"completed"===l||"interviewed"===l?e.completed++:"in-progress"===l?e["in-progress"]++:"rejected"===l?e.rejected++:e.pending++}),e})(),H=N.map(e=>({...e,applicants:e.applicants.filter(e=>{var t;let s=e.name.toLowerCase().includes(L.toLowerCase())||e.email.toLowerCase().includes(L.toLowerCase()),l=!E||(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())===E.toLowerCase();return s&&l})})).filter(e=>e.applicants.length>0);return(0,l.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,l.jsx)(c.Z,{role:"company"}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto transition-all duration-300 ".concat(f?"ml-64":"ml-20"),children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)("button",{onClick:()=>e.push("/business/dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-all hover:scale-110 duration-200",children:(0,l.jsx)(u.Z,{className:"w-6 h-6 text-slate-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#007a78] to-[#11cd68] bg-clip-text text-transparent flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-gradient-to-br from-[#11cd68]/20 to-[#007a78]/20 rounded-lg",children:(0,l.jsx)(x.Z,{className:"w-8 h-8 text-[#007a78]"})}),"Applicants"]}),(0,l.jsxs)("p",{className:"text-slate-600 mt-2",children:[N.reduce((e,t)=>e+t.applicants.length,0)," total candidates across ",N.length," job",1!==N.length?"s":""]})]})]}),g.length>0&&(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,l.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Interviewed"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-700",children:G.completed})]}),(0,l.jsx)(o.Z,{className:"w-8 h-8 text-green-600 opacity-30"})]})}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:G["in-progress"]})]}),(0,l.jsx)(d.Z,{className:"w-8 h-8 text-blue-600 opacity-30"})]})}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Shortlisted"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:G.pending})]}),(0,l.jsx)(m.Z,{className:"w-8 h-8 text-purple-600 opacity-30"})]})}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-red-700",children:G.rejected})]}),(0,l.jsx)(p.Z,{className:"w-8 h-8 text-red-600 opacity-30"})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:L,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#007a78] focus:border-transparent transition-all"})]}),(0,l.jsxs)("select",{value:E,onChange:e=>_(e.target.value),className:"px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#007a78] focus:border-transparent transition-all cursor-pointer",children:[(0,l.jsx)("option",{value:"",children:"All Status"}),(0,l.jsx)("option",{value:"interviewed",children:"Interviewed"}),(0,l.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,l.jsx)("option",{value:"applied",children:"Applied"}),(0,l.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),(0,l.jsx)("div",{className:"p-6 space-y-6",children:y?(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(d.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4 animate-spin"}),(0,l.jsx)("p",{className:"text-slate-600 text-lg",children:"Loading applicants..."})]})}):0===H.length?(0,l.jsxs)("div",{className:"bg-white rounded-lg p-12 text-center border border-slate-200",children:[(0,l.jsx)(x.Z,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-600 text-lg",children:"No applicants found"}),(0,l.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Applicants will appear here once candidates apply to your jobs"})]}):H.map(t=>(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,l.jsxs)("button",{onClick:()=>U(t.job.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50 transition-colors border-b border-slate-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-1 text-left",children:[(0,l.jsx)(b.Z,{className:"w-6 h-6 text-[#007a78]"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900",children:t.job.title}),(0,l.jsxs)("p",{className:"text-sm text-slate-600",children:[t.applicants.length," applicant",1!==t.applicants.length?"s":""," • ",F(t)," interviewed"]})]})]}),(0,l.jsx)("div",{className:"text-slate-400",children:A.has(t.job.id)?"▼":"▶"})]}),A.has(t.job.id)&&(0,l.jsx)("div",{className:"divide-y divide-slate-100",children:t.applicants.map(t=>(0,l.jsxs)("div",{onClick:()=>e.push("/business/dashboard/applicants/".concat(t.id)),className:"px-6 py-4 hover:bg-slate-50 transition-colors cursor-pointer border-l-4 border-transparent hover:border-[#11cd68]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#007a78] to-[#11cd68] flex items-center justify-center text-white font-semibold text-sm",children:t.name.charAt(0).toUpperCase()}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h4",{className:"font-semibold text-slate-900",children:t.name}),(0,l.jsx)("p",{className:"text-sm text-slate-600 truncate",children:t.email})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ".concat(q(t.status)),children:t.status||"Applied"}),R(t.status)]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-600 ml-13",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCCB ",t.position_applied||"Position not specified"]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCC5 ",M(t.created_at)]})]})]},t.id))})]},t.job.id))})]})]})}},6367:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5795:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8470:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9150:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6680:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[9066,1341,8985,2971,2117,1744],function(){return e(e.s=241)}),_N_E=e.O()}]);