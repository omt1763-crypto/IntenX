(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6413],{5895:function(e,t,s){Promise.resolve().then(s.bind(s,8051))},8051:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return BusinessApplicantsPage}});var a=s(7437),l=s(2265),r=s(4033),n=s(4678),i=s(5046),c=s(4102),o=s(2609),d=s(8523),p=s(1012),u=s(1372),x=s(6773),m=s(7171),h=s(3835),b=s(3731);function BusinessApplicantsPage(){let e=(0,r.useRouter)(),{user:t,isAuthenticated:s}=(0,n.useAuth)(),{isOpen:g}=(0,i.useSidebar)(),[j,f]=(0,l.useState)([]),[v,w]=(0,l.useState)([]),[N,y]=(0,l.useState)(!0),[C,k]=(0,l.useState)(!1),[Z,A]=(0,l.useState)(new Set),[S,B]=(0,l.useState)(""),[L,D]=(0,l.useState)(""),E=null==t?void 0:t.id;(0,l.useEffect)(()=>{k(!0),E&&s?loadApplicants():C&&!s&&e.push("/auth/login")},[E,s,C]);let loadApplicants=async()=>{try{if(!E)return;console.log("[BusinessApplicants] Loading applicants for company:",E);let e=await fetch("/api/get-applicants?recruiterId=".concat(E)),t=await e.json();if(console.log("[BusinessApplicants] Applicants API response:",t),t.data&&Array.isArray(t.data)){console.log("[BusinessApplicants] Found",t.data.length,"applicants"),f(t.data);let e=groupApplicantsByJob(t.data);console.log("[BusinessApplicants] Grouped by job:",e),w(e),A(new Set(e.map(e=>e.job.id))),console.log("[BusinessApplicants] Applicants loaded:",t.data.length)}}catch(e){console.error("[BusinessApplicants] Error loading applicants:",e)}finally{y(!1)}},groupApplicantsByJob=e=>{let t={};e.forEach(e=>{let s=e.job_id;if(!t[s]){var a,l,r;t[s]={job:{id:(null===(a=e.jobs)||void 0===a?void 0:a.id)||s,title:(null===(l=e.jobs)||void 0===l?void 0:l.title)||"Unknown Job",company:(null===(r=e.jobs)||void 0===r?void 0:r.company)||"Unknown Company"},applicants:[],expanded:!0}}t[s].applicants.push(e)});let s=Object.values(t).sort((e,t)=>e.job.title.localeCompare(t.job.title));return s},toggleJobExpand=e=>{let t=new Set(Z);t.has(e)?t.delete(e):t.add(e),A(t)},getStatusBadgeColor=e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":case"interviewed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"shortlisted":return"bg-purple-100 text-purple-800";case"applied":case"reviewing":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}},getStatusIcon=e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":case"interviewed":return(0,a.jsx)(o.Z,{className:"w-5 h-5 text-green-600"});case"in-progress":return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"});case"rejected":return(0,a.jsx)(p.Z,{className:"w-5 h-5 text-red-600"});default:return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600"})}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),getInterviewedCount=e=>e.applicants.filter(e=>{var t,s;return(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())==="interviewed"||(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())==="completed"}).length;if(!C||!s)return null;let I=(()=>{let e={completed:0,"in-progress":0,rejected:0,pending:0};return j.forEach(t=>{var s;let a=null===(s=t.status)||void 0===s?void 0:s.toLowerCase();"completed"===a||"interviewed"===a?e.completed++:"in-progress"===a?e["in-progress"]++:"rejected"===a?e.rejected++:e.pending++}),e})(),_=v.map(e=>({...e,applicants:e.applicants.filter(e=>{var t;let s=e.name.toLowerCase().includes(S.toLowerCase())||e.email.toLowerCase().includes(S.toLowerCase()),a=!L||(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())===L.toLowerCase();return s&&a})})).filter(e=>e.applicants.length>0);return(0,a.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,a.jsx)(c.Z,{role:"company"}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto transition-all duration-300 ".concat(g?"ml-64":"ml-20"),children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>e.push("/business/dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-all hover:scale-110 duration-200",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#007a78] to-[#11cd68] bg-clip-text text-transparent flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-[#11cd68]/20 to-[#007a78]/20 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-8 h-8 text-[#007a78]"})}),"Applicants"]}),(0,a.jsxs)("p",{className:"text-slate-600 mt-2",children:[v.reduce((e,t)=>e+t.applicants.length,0)," total candidates across ",v.length," job",1!==v.length?"s":""]})]})]}),j.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Interviewed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-700",children:I.completed})]}),(0,a.jsx)(o.Z,{className:"w-8 h-8 text-green-600 opacity-30"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:I["in-progress"]})]}),(0,a.jsx)(d.Z,{className:"w-8 h-8 text-blue-600 opacity-30"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Shortlisted"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:I.pending})]}),(0,a.jsx)(m.Z,{className:"w-8 h-8 text-purple-600 opacity-30"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-700",children:I.rejected})]}),(0,a.jsx)(p.Z,{className:"w-8 h-8 text-red-600 opacity-30"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:S,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#007a78] focus:border-transparent transition-all"})]}),(0,a.jsxs)("select",{value:L,onChange:e=>D(e.target.value),className:"px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#007a78] focus:border-transparent transition-all cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"interviewed",children:"Interviewed"}),(0,a.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,a.jsx)("option",{value:"applied",children:"Applied"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),(0,a.jsx)("div",{className:"p-6 space-y-6",children:N?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4 animate-spin"}),(0,a.jsx)("p",{className:"text-slate-600 text-lg",children:"Loading applicants..."})]})}):0===_.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg p-12 text-center border border-slate-200",children:[(0,a.jsx)(x.Z,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600 text-lg",children:"No applicants found"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Applicants will appear here once candidates apply to your jobs"})]}):_.map(t=>(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,a.jsxs)("button",{onClick:()=>toggleJobExpand(t.job.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-slate-50 transition-colors border-b border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 text-left",children:[(0,a.jsx)(b.Z,{className:"w-6 h-6 text-[#007a78]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:t.job.title}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[t.applicants.length," applicant",1!==t.applicants.length?"s":""," • ",getInterviewedCount(t)," interviewed"]})]})]}),(0,a.jsx)("div",{className:"text-slate-400",children:Z.has(t.job.id)?"▼":"▶"})]}),Z.has(t.job.id)&&(0,a.jsx)("div",{className:"divide-y divide-slate-100",children:t.applicants.map(t=>(0,a.jsxs)("div",{onClick:()=>e.push("/business/dashboard/applicants/".concat(t.id)),className:"px-6 py-4 hover:bg-slate-50 transition-colors cursor-pointer border-l-4 border-transparent hover:border-[#11cd68]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#007a78] to-[#11cd68] flex items-center justify-center text-white font-semibold text-sm",children:t.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-semibold text-slate-900",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-slate-600 truncate",children:t.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ".concat(getStatusBadgeColor(t.status)),children:t.status||"Applied"}),getStatusIcon(t.status)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-600 ml-13",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCCB ",t.position_applied||"Position not specified"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCC5 ",formatDate(t.created_at)]})]})]},t.id))})]},t.job.id))})]})]})}},1372:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6788:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3731:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},2609:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8523:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3835:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1012:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[7653,9292,4102,2971,2472,1744],function(){return e(e.s=5895)}),_N_E=e.O()}]);