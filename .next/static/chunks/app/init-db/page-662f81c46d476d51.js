(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7138],{7666:function(e,t,s){Promise.resolve().then(s.bind(s,9862))},9862:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),n=s(2265);function l(){let[e,t]=(0,n.useState)("idle"),[s,l]=(0,n.useState)(""),r=async()=>{t("loading"),l("Creating users table...");try{let e=await fetch("/api/admin/init-db"),s=await e.json();e.ok&&s.ready?(t("success"),l("✅ Users table created successfully!")):(t("error"),l(s.message||"Failed to create table. Please follow the manual instructions below."))}catch(e){t("error"),l("Error: "+e.message)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 p-8",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"\uD83D\uDD27 Database Initialization"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"Before you can use the authentication system, we need to create the users table in Supabase."}),s&&(0,a.jsx)("div",{className:"p-4 rounded-lg mb-6 ".concat("success"===e?"bg-green-100 text-green-800":"error"===e?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:s}),(0,a.jsxs)("div",{className:"mb-8 p-6 border-2 border-green-200 rounded-lg bg-green-50",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-3",children:"✅ Option 1: Automatic Setup (Recommended)"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"Click the button below and I'll try to create the table automatically."}),(0,a.jsx)("button",{onClick:r,disabled:"loading"===e,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400 transition",children:"loading"===e?"⏳ Creating...":"\uD83D\uDE80 Create Table"})]}),(0,a.jsxs)("div",{className:"p-6 border-2 border-blue-200 rounded-lg bg-blue-50",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-3",children:"\uD83D\uDCCB Option 2: Manual Setup"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"If the automatic method doesn't work, follow these steps:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-slate-600 mb-4",children:[(0,a.jsxs)("li",{children:["Go to"," ",(0,a.jsx)("a",{href:"https://app.supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://app.supabase.com"})]}),(0,a.jsxs)("li",{children:["Select project: ",(0,a.jsx)("strong",{children:"efiurfmrgyisldruqbad"})]}),(0,a.jsxs)("li",{children:["Click ",(0,a.jsx)("strong",{children:'"SQL Editor"'})," in the left sidebar"]}),(0,a.jsxs)("li",{children:["Click blue ",(0,a.jsx)("strong",{children:'"New Query"'})," button"]}),(0,a.jsx)("li",{children:"Copy the SQL code below"}),(0,a.jsx)("li",{children:"Paste into the SQL editor"}),(0,a.jsxs)("li",{children:["Click ",(0,a.jsx)("strong",{children:'"Run"'})," ⚡"]})]}),(0,a.jsx)("div",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg font-mono text-sm overflow-auto mb-4",children:(0,a.jsx)("pre",{children:"CREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  first_name VARCHAR(255) NOT NULL,\n  last_name VARCHAR(255) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  password_hash VARCHAR(255) NOT NULL,\n  role VARCHAR(50) NOT NULL CHECK (role IN ('candidate', 'recruiter', 'company')),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users(email);\n\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\nDROP TRIGGER IF EXISTS update_users_updated_at ON users;\nCREATE TRIGGER update_users_updated_at\nBEFORE UPDATE ON users\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at_column();"})}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("CREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  first_name VARCHAR(255) NOT NULL,\n  last_name VARCHAR(255) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  password_hash VARCHAR(255) NOT NULL,\n  role VARCHAR(50) NOT NULL CHECK (role IN ('candidate', 'recruiter', 'company')),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users(email);\n\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\nDROP TRIGGER IF EXISTS update_users_updated_at ON users;\nCREATE TRIGGER update_users_updated_at\nBEFORE UPDATE ON users\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at_column();"),alert("SQL copied to clipboard!")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition",children:"\uD83D\uDCCB Copy SQL"})]}),(0,a.jsx)("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,a.jsx)("strong",{children:"Note:"})," After creating the table, you can test signup at"," ",(0,a.jsx)("a",{href:"/auth/signup",className:"text-blue-600 hover:underline",children:"/auth/signup"})]})})]})})})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=7666)}),_N_E=e.O()}]);