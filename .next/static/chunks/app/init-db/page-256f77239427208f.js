(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7138],{8673:function(e,t,a){Promise.resolve().then(a.bind(a,7419))},7419:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return InitDBPage}});var n=a(7437),s=a(2265);function InitDBPage(){let[e,t]=(0,s.useState)("idle"),[a,r]=(0,s.useState)(""),createTable=async()=>{t("loading"),r("Creating users table...");try{let e=await fetch("/api/admin/init-db"),a=await e.json();e.ok&&a.ready?(t("success"),r("✅ Users table created successfully!")):(t("error"),r(a.message||"Failed to create table. Please follow the manual instructions below."))}catch(e){t("error"),r("Error: "+e.message)}};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 p-8",children:(0,n.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"\uD83D\uDD27 Database Initialization"}),(0,n.jsx)("p",{className:"text-slate-600 mb-6",children:"Before you can use the authentication system, we need to create the users table in Supabase."}),a&&(0,n.jsx)("div",{className:"p-4 rounded-lg mb-6 ".concat("success"===e?"bg-green-100 text-green-800":"error"===e?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:a}),(0,n.jsxs)("div",{className:"mb-8 p-6 border-2 border-green-200 rounded-lg bg-green-50",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-3",children:"✅ Option 1: Automatic Setup (Recommended)"}),(0,n.jsx)("p",{className:"text-slate-600 mb-4",children:"Click the button below and I'll try to create the table automatically."}),(0,n.jsx)("button",{onClick:createTable,disabled:"loading"===e,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400 transition",children:"loading"===e?"⏳ Creating...":"\uD83D\uDE80 Create Table"})]}),(0,n.jsxs)("div",{className:"p-6 border-2 border-blue-200 rounded-lg bg-blue-50",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-3",children:"\uD83D\uDCCB Option 2: Manual Setup"}),(0,n.jsx)("p",{className:"text-slate-600 mb-4",children:"If the automatic method doesn't work, follow these steps:"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-slate-600 mb-4",children:[(0,n.jsxs)("li",{children:["Go to"," ",(0,n.jsx)("a",{href:"https://app.supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://app.supabase.com"})]}),(0,n.jsxs)("li",{children:["Select project: ",(0,n.jsx)("strong",{children:"efiurfmrgyisldruqbad"})]}),(0,n.jsxs)("li",{children:["Click ",(0,n.jsx)("strong",{children:'"SQL Editor"'})," in the left sidebar"]}),(0,n.jsxs)("li",{children:["Click blue ",(0,n.jsx)("strong",{children:'"New Query"'})," button"]}),(0,n.jsx)("li",{children:"Copy the SQL code below"}),(0,n.jsx)("li",{children:"Paste into the SQL editor"}),(0,n.jsxs)("li",{children:["Click ",(0,n.jsx)("strong",{children:'"Run"'})," ⚡"]})]}),(0,n.jsx)("div",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg font-mono text-sm overflow-auto mb-4",children:(0,n.jsx)("pre",{children:"CREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  first_name VARCHAR(255) NOT NULL,\n  last_name VARCHAR(255) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  password_hash VARCHAR(255) NOT NULL,\n  role VARCHAR(50) NOT NULL CHECK (role IN ('candidate', 'recruiter', 'company')),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users(email);\n\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\nDROP TRIGGER IF EXISTS update_users_updated_at ON users;\nCREATE TRIGGER update_users_updated_at\nBEFORE UPDATE ON users\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at_column();"})}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("CREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  first_name VARCHAR(255) NOT NULL,\n  last_name VARCHAR(255) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  password_hash VARCHAR(255) NOT NULL,\n  role VARCHAR(50) NOT NULL CHECK (role IN ('candidate', 'recruiter', 'company')),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX idx_users_email ON users(email);\n\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\nDROP TRIGGER IF EXISTS update_users_updated_at ON users;\nCREATE TRIGGER update_users_updated_at\nBEFORE UPDATE ON users\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at_column();"),alert("SQL copied to clipboard!")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition",children:"\uD83D\uDCCB Copy SQL"})]}),(0,n.jsx)("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,n.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,n.jsx)("strong",{children:"Note:"})," After creating the table, you can test signup at"," ",(0,n.jsx)("a",{href:"/auth/signup",className:"text-blue-600 hover:underline",children:"/auth/signup"})]})})]})})})}},622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=a(2265),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,d=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var n,r={},o=null,u=null;for(n in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,n)&&!i.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:s,type:e,key:o,ref:u,props:r,_owner:d.current}}t.Fragment=r,t.jsx=q,t.jsxs=q},7437:function(e,t,a){"use strict";e.exports=a(622)}},function(e){e.O(0,[2971,2472,1744],function(){return e(e.s=8673)}),_N_E=e.O()}]);