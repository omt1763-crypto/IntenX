(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9557],{8254:function(e,t,s){Promise.resolve().then(s.bind(s,8364))},8364:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ApplicantsPage}});var a=s(7437),l=s(2265),r=s(4033),n=s(4678),i=s(5046),c=s(4102),o=s(2609),d=s(8523),x=s(1012),u=s(1372),m=s(6773),p=s(7171),h=s(3835),b=s(7865);let g=(0,b.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var f=s(3731);let j=(0,b.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var v=s(4457),N=s(8144),y=s(9799);function ApplicantsPage(){var e;let t=(0,r.useRouter)(),s=(0,r.useSearchParams)(),{user:b,isAuthenticated:w}=(0,n.useAuth)(),{isOpen:k}=(0,i.useSidebar)(),[Z,A]=(0,l.useState)([]),[C,S]=(0,l.useState)([]),[P,_]=(0,l.useState)(!0),[z,E]=(0,l.useState)(!1),[L,M]=(0,l.useState)(new Set),[I,B]=(0,l.useState)(""),[D,J]=(0,l.useState)(""),U=null==b?void 0:b.id,O=s.get("jobId");(0,l.useEffect)(()=>{E(!0),U&&w?loadApplicants():z&&!w&&t.push("/auth/login")},[U,w,z]);let loadApplicants=async()=>{try{if(!U)return;console.log("[ApplicantsPage] Loading applicants for recruiter:",U);let e=await fetch("/api/get-applicants?recruiterId=".concat(U)),t=await e.json();if(console.log("[ApplicantsPage] API response:",t),t.data){console.log("[ApplicantsPage] Raw applicants data:",t.data),A(t.data);let e=groupApplicantsByJob(t.data);console.log("[ApplicantsPage] Grouped by job:",e),S(e),O?M(new Set([O])):M(new Set(e.map(e=>e.job.id))),console.log("[ApplicantsPage] Applicants loaded:",t.data.length)}}catch(e){console.error("[ApplicantsPage] Error loading applicants:",e)}finally{_(!1)}},groupApplicantsByJob=e=>{let t=e;O&&(t=e.filter(e=>e.job_id===O));let s={};t.forEach(e=>{let t=e.job_id;if(!s[t]){var a,l,r;s[t]={job:{id:(null===(a=e.jobs)||void 0===a?void 0:a.id)||t,title:(null===(l=e.jobs)||void 0===l?void 0:l.title)||"Unknown Job",company:(null===(r=e.jobs)||void 0===r?void 0:r.company)||"Unknown Company"},applicants:[],expanded:!0}}s[t].applicants.push(e)});let a=Object.values(s).sort((e,t)=>e.job.title.localeCompare(t.job.title));return a},toggleJobExpand=e=>{let t=new Set(L);t.has(e)?t.delete(e):t.add(e),M(t)},getStatusIcon=e=>{switch(e){case"completed":return(0,a.jsx)(o.Z,{className:"w-5 h-5 text-green-600"});case"in-progress":return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"});case"rejected":return(0,a.jsx)(x.Z,{className:"w-5 h-5 text-red-600"});default:return(0,a.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600"})}},getStatusBadgeColor=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),getTotalApplicants=()=>C.reduce((e,t)=>e+t.applicants.length,0);if(!z||!w)return null;let T=(()=>{let e={completed:0,"in-progress":0,rejected:0,pending:0};return Z.forEach(t=>{e.hasOwnProperty(t.status)?e[t.status]++:e.pending++}),e})(),q=C.map(e=>({...e,applicants:e.applicants.filter(e=>{let t=e.name.toLowerCase().includes(I.toLowerCase())||e.email.toLowerCase().includes(I.toLowerCase()),s=!D||e.status===D;return t&&s})})).filter(e=>e.applicants.length>0);return(0,a.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,a.jsx)(c.Z,{role:"recruiter"}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto transition-all duration-300 ".concat(k?"ml-64":"ml-20"),children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>t.push(O?"/recruiter/dashboard/jobs":"/recruiter/dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-all hover:scale-110 duration-200",children:(0,a.jsx)(u.Z,{className:"w-6 h-6 text-slate-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 text-blue-600"})}),O?"Job Applicants":"All Applicants"]}),(0,a.jsx)("p",{className:"text-slate-600 mt-2",children:O?"".concat(getTotalApplicants()," candidate").concat(1!==getTotalApplicants()?"s":""," for ").concat((null===(e=C[0])||void 0===e?void 0:e.job.title)||"this job"):"".concat(getTotalApplicants()," total candidates across ").concat(C.length," job").concat(1!==C.length?"s":"")})]})]}),Z.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-700",children:T.completed})]}),(0,a.jsx)(o.Z,{className:"w-8 h-8 text-green-600 opacity-30"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:T["in-progress"]})]}),(0,a.jsx)(d.Z,{className:"w-8 h-8 text-blue-600 opacity-30"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-700",children:T.rejected})]}),(0,a.jsx)(x.Z,{className:"w-8 h-8 text-red-600 opacity-30"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4 border border-amber-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-amber-600 font-medium",children:"Pending"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-amber-700",children:T.pending})]}),(0,a.jsx)(p.Z,{className:"w-8 h-8 text-amber-600 opacity-30"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:I,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("select",{value:D,onChange:e=>J(e.target.value),className:"px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:P?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("div",{className:"inline-block",children:(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"})}),(0,a.jsx)("p",{className:"text-slate-600 mt-6 text-lg font-medium",children:"Loading applicants..."})]}):0!==q.length||I||D||0!==C.length?0===q.length?(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-slate-200 shadow-sm",children:[(0,a.jsx)(g,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-900 text-lg font-semibold",children:"No results found"}),(0,a.jsx)("p",{className:"text-slate-600 text-sm mt-2",children:"Try adjusting your search or filter criteria"})]}):(0,a.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>toggleJobExpand(e.job.id),className:"w-full px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 to-transparent transition-all flex items-center justify-between border-b border-slate-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 text-left",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:(0,a.jsx)(f.Z,{className:"w-7 h-7 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:e.job.title}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.job.company})]}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2 rounded-full shadow-md",children:[e.applicants.length," applicant",1!==e.applicants.length?"s":""]})]}),(0,a.jsx)("div",{className:"ml-4",children:L.has(e.job.id)?(0,a.jsx)(j,{className:"w-6 h-6 text-slate-400"}):(0,a.jsx)(v.Z,{className:"w-6 h-6 text-slate-400"})})]}),L.has(e.job.id)&&(0,a.jsx)("div",{className:"divide-y divide-slate-100",children:e.applicants.map((e,s)=>(0,a.jsx)("div",{className:"px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 to-transparent transition-all duration-150 group",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-300 to-slate-400 rounded-lg flex items-center justify-center flex-shrink-0 font-bold text-white text-sm",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-bold text-slate-900 text-base",children:e.name}),getStatusIcon(e.status)]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm text-slate-600 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 flex-shrink-0 text-slate-400"}),(0,a.jsx)("a",{href:"mailto:".concat(e.email),className:"hover:text-blue-600 truncate font-medium",children:e.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"â€¢"}),(0,a.jsx)("span",{className:"font-medium text-slate-700",children:e.position_applied})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 flex-shrink-0 text-slate-400"}),(0,a.jsx)("span",{className:"font-medium",children:formatDate(e.created_at)})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.status&&(0,a.jsx)("span",{className:"px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ".concat(getStatusBadgeColor(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1).replace("-"," ")}),(0,a.jsx)("button",{onClick:()=>t.push("/recruiter/dashboard/applicants/".concat(e.id)),className:"px-5 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-200 whitespace-nowrap shadow-md hover:shadow-lg hover:scale-105 active:scale-95",children:"View Details"})]})]})},e.id))})]},e.job.id))}):(0,a.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-slate-200 shadow-sm",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("p",{className:"text-slate-900 text-xl font-semibold",children:"No applicants yet"}),(0,a.jsx)("p",{className:"text-slate-600 text-sm mt-2",children:"Applicants will appear here when candidates apply for your jobs"})]})}),"      "]})]})}},1372:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6788:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3731:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},9799:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2609:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},4457:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8523:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8144:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3835:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1012:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7865);let l=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[7653,9292,4102,2971,2472,1744],function(){return e(e.s=8254)}),_N_E=e.O()}]);