(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3335],{5716:function(e,t,s){Promise.resolve().then(s.bind(s,8135))},8135:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var l=s(7437),i=s(2265),a=s(9376),n=s(1233),o=s(8985),d=s(5274),r=s(8279),c=s(1456),m=s(8470);function h(){var e,t,s;let h=(0,a.useRouter)(),u=(0,a.useSearchParams)(),{user:x,isAuthenticated:p,isHydrated:v}=(0,n.a)(),[b,g]=(0,i.useState)(null),[f,j]=(0,i.useState)(!0),[w,N]=(0,i.useState)(!1),[y,k]=(0,i.useState)(null),[S,A]=(0,i.useState)(!1),C=null==u?void 0:u.get("applicantId");null==x||x.id,(0,i.useEffect)(()=>{N(!0)},[]),(0,i.useEffect)(()=>{C&&w&&v&&(console.log("[ApplicantDetail] Loading interview data..."),I())},[C,v,w]),(0,i.useEffect)(()=>{w&&v&&!x&&!f&&!b&&S&&(console.log("[ApplicantDetail] No authUser and no data available, redirecting to login"),h.push("/auth/login"))},[v,x,w,f,b,S]);let I=async()=>{try{let e=await fetch("/api/interview-detail?applicantId=".concat(C)),t=await e.json();t.data?(g(t.data),A(!1),t.data.analysis?(k(t.data.analysis),console.log("[ApplicantDetail] Using stored AI analysis:",t.data.analysis)):(D(t.data),console.log("[ApplicantDetail] No AI analysis found, generating assessment...")),console.log("[ApplicantDetail] Interview loaded:",t.data)):t.error&&(console.warn("[ApplicantDetail] No interview found:",t.error),A(!0),g(null))}catch(e){console.error("[ApplicantDetail] Error loading interview:",e),A(!0)}finally{j(!1)}},D=e=>{var t,s,l,i;let a=(null===(t=e.conversation)||void 0===t?void 0:t.filter(e=>"user"===e.role))||[],n=(null===(s=e.skills)||void 0===s?void 0:s.length)||0;console.log("[Assessment] Analyzing",a.length,"user messages with",n,"skills");let o=0,d=0,r=0,c=(null===(i=e.conversation)||void 0===i?void 0:null===(l=i.filter(e=>"ai"===e.role||"assistant"===e.role))||void 0===l?void 0:l.length)||1,m=a.length/Math.max(c,1)*100;m>=90?o+=20:m>=70?o+=15:m>=50&&(o+=10),o+=a.some(e=>{var t,s,l;return(null===(t=e.content)||void 0===t?void 0:t.toLowerCase().includes("?"))&&(null===(s=e.content)||void 0===s?void 0:s.toLowerCase().includes("what"))||(null===(l=e.content)||void 0===l?void 0:l.toLowerCase().includes("how"))})?20:0,a.reduce((e,t)=>{var s;return e+((null===(s=t.content)||void 0===s?void 0:s.length)||0)},0),a.length;let h=a.map(e=>{var t;return(null===(t=e.content)||void 0===t?void 0:t.length)||0});o+=h.length>0&&h.every(e=>e>50)?20:10,o=Math.min(60,o);let u=0;a.forEach(e=>{var t;let s=(null===(t=e.content)||void 0===t?void 0:t.toLowerCase())||"",l=/\d+/.test(s)?5:0,i=["improve","increase","decrease","reduce","%","faster","scale"].some(e=>s.includes(e))?5:0,a=["python","javascript","react","node","sql","api","database","framework","library"].some(e=>s.includes(e))?5:0;u+=l+i+a;let n=["i built","i created","i led","i designed","i developed","i implemented","i decided","i improved"].some(e=>s.includes(e))?10:0;u+=n;let o=["result","achieved","completed","delivered","impact","outcome","delivered"].some(e=>s.includes(e))?5:0;u+=o}),d=Math.min(80,u);let x=0;a.forEach(e=>{var t;let s=(null===(t=e.content)||void 0===t?void 0:t.toLowerCase())||"",l=["first","then","next","step","process","approach","method"].some(e=>s.includes(e))?30:0;x+=l;let i=["trade-off","tradeoff","consider","limitation","constraint","challenge","however","but","although"].some(e=>s.includes(e))?30:0;x+=i;let a=["learned","realized","discovered","improved","better","success","failed","lesson","outcome"].some(e=>s.includes(e))?30:0;x+=a}),n>3&&(x+=Math.min(30,5*n)),console.log("[Assessment] Scores:",{driveInitiative:o,relevantAccomplishments:d,problemSolving:r=Math.min(90,x)});let p=Math.round((d+o+r)/3),v=Z(a.length,e);k({jobSuitability:p,relevantAccomplishments:d,driveInitiative:o,problemSolving:r,cultureScopes:60,leadershipInfluence:55,userMessageCount:a.length,skillsCount:n,summary:v,recommendation:p>60?"Consider for Interview":"Do Not Hire"})},Z=(e,t)=>0===e?"Candidate ended interview immediately without engaging, demonstrating very low motivation and questionable professionalism.":e<3?"Candidate showed minimal engagement during the interview with very few responses. Limited information available to assess job-related competencies.":e<5?"Candidate demonstrated moderate engagement during the interview. Some substantive responses provided but needs further evaluation.":e<8?"Candidate demonstrated good engagement throughout the interview with multiple thoughtful responses. Shows competency in several areas.":"Candidate demonstrated strong engagement with consistent, detailed responses throughout the interview. Showed good understanding of role requirements and strong communication skills.",L=async e=>{if(C)try{j(!0);let t=await fetch("/api/applicants",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantId:C,status:e})}),s=await t.json();t.ok?(console.log("[ApplicantDetail] Status updated to",e,s.applicant),await I()):console.error("[ApplicantDetail] Failed to update status",s)}catch(e){console.error("[ApplicantDetail] Error updating status:",e)}finally{j(!1)}};return w?v?!v||p||b||f?(0,l.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,l.jsx)(o.Z,{role:"recruiter"}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto ml-64",children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 shadow-sm",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)(d.Z,{}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:(null==b?void 0:b.name)||"Loading..."})]})}),(0,l.jsx)("div",{className:"p-6 max-w-6xl",children:f?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading interview data..."})]}):S?(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[(0,l.jsx)(r.Z,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Interview Found"}),(0,l.jsx)("p",{className:"text-slate-600 mb-6",children:"This applicant has not completed an interview yet."}),(0,l.jsx)("button",{onClick:()=>window.history.back(),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go Back"})]}):b?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Interview Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Applied For"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:b.position})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Interviewed On"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:new Date(b.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-4 h-4"}),"Email"]}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:b.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4"}),"Interview Duration"]}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:(e=b.duration,"".concat(Math.floor(e/60),"m ").concat(e%60,"s"))})]})]})]}),y&&(0,l.jsxs)("div",{className:"".concat((t=y.jobSuitability)>=70?"bg-green-50":t>=50?"bg-yellow-50":"bg-red-50"," rounded-lg border border-slate-200 p-6"),children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Job Suitability"}),(0,l.jsxs)("div",{className:"flex items-end gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-5xl font-bold ".concat((s=y.jobSuitability)>=70?"text-green-600":s>=50?"text-yellow-600":"text-red-600"),children:[y.jobSuitability,"%"]}),(0,l.jsxs)("p",{className:"text-sm text-slate-600 mt-2",children:[b.duration||0,"m interview"]})]}),(0,l.jsx)("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full transition-all ".concat(y.jobSuitability>=70?"bg-green-500":y.jobSuitability>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(y.jobSuitability,"%")}})})]})]}),y&&(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Assessment Breakdown"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Relevant Accomplishments"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[y.relevantAccomplishments,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-blue-500 transition-all",style:{width:"".concat(y.relevantAccomplishments,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Drive & Initiative"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[y.driveInitiative,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-green-500 transition-all",style:{width:"".concat(y.driveInitiative,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Problem Solving"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[y.problemSolving,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-purple-500 transition-all",style:{width:"".concat(y.problemSolving,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Culture & Scope Fit"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[y.cultureScopes,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-orange-500 transition-all",style:{width:"".concat(y.cultureScopes,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Leadership & Influence"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[y.leadershipInfluence,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-pink-500 transition-all",style:{width:"".concat(y.leadershipInfluence,"%")}})})]})]})]}),y&&(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,l.jsx)(r.Z,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"AI Summary"}),(0,l.jsx)("p",{className:"text-lg font-semibold mt-2 ".concat(y.jobSuitability>50?"text-green-600":"text-red-600"),children:y.recommendation})]})]}),(0,l.jsx)("p",{className:"text-slate-700 leading-relaxed",children:y.summary})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Qualitative Assessment"}),(0,l.jsx)("p",{className:"text-slate-600 mb-4 text-sm",children:"Interview analysis based on conversation and engagement during the interview session."}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Relevant Accomplishments"}),(0,l.jsx)("p",{className:"text-slate-700",children:(null==y?void 0:y.relevantAccomplishments)===0?"Insufficient data - Candidate provided minimal examples of relevant accomplishments.":"Candidate demonstrated relevant accomplishments aligned with position requirements."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Drive & Initiative"}),(0,l.jsx)("p",{className:"text-slate-700",children:(null==y?void 0:y.driveInitiative)<30?"Candidate demonstrated low engagement and willingness to participate in the interview.":"Candidate showed good engagement and initiative throughout the interview."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Problem Solving"}),(0,l.jsx)("p",{className:"text-slate-700",children:(null==y?void 0:y.problemSolving)===0?"Insufficient data - Not enough information to assess problem-solving skills.":"Candidate demonstrated ".concat((null==y?void 0:y.problemSolving)>50?"strong":"moderate"," problem-solving abilities.")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Areas To Explore"}),(0,l.jsxs)("ul",{className:"text-slate-700 space-y-2 list-disc list-inside",children:[(0,l.jsx)("li",{children:"Motivation and interest in the position"}),(0,l.jsx)("li",{children:"Relevant experience and background"}),(0,l.jsx)("li",{children:"Communication and professional conduct"}),(0,l.jsx)("li",{children:"Technical competencies for the role"})]})]})]})]}),"              ",(0,l.jsx)("div",{className:"flex gap-4 items-center",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>L("shortlisted"),disabled:f,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-60",children:"Shortlist"}),(0,l.jsx)("button",{onClick:()=>L("rejected"),disabled:f,className:"px-6 py-3 bg-slate-200 text-slate-900 rounded-lg font-semibold hover:bg-slate-300 transition-colors disabled:opacity-60",children:"Reject"})]})})]}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(r.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-600 text-lg",children:"No interview data found"})]})})]})]}):(console.log("[ApplicantDetail] Auth failed and no data loaded, redirecting to login"),null):(0,l.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,l.jsx)(o.Z,{role:"recruiter"}),(0,l.jsx)("div",{className:"flex-1 overflow-auto ml-64 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading..."})]})})]}):null}function u(){return(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,l.jsx)("p",{className:"text-white",children:"Loading..."})}),children:(0,l.jsx)(h,{})})}},5274:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var l=s(7437),i=s(9376),a=s(2009),n=s(1119);function o(){let e=(0,i.useRouter)(),t=(0,i.usePathname)();if("/candidate/dashboard"===t||"/recruiter/dashboard"===t||"/business/dashboard"===t)return null;let s=(()=>{let e=t.split("/").filter(Boolean);if(e.length<=2)return[];let s=[];if("candidate"===e[0]?s.push({label:"Dashboard",path:"/candidate/dashboard",icon:"home"}):"recruiter"===e[0]?s.push({label:"Dashboard",path:"/recruiter/dashboard",icon:"home"}):"business"===e[0]&&s.push({label:"Dashboard",path:"/business/dashboard",icon:"home"}),e.length>2){let t=e[2],l={practice:"Practice Types",skills:"Skills Map",resume:"Resume Analysis",certificates:"Certificates",profile:"My Profile",activity:"Activity",billing:"Billing",history:"Interview History",applicants:"Applicants",jobs:"Jobs",detail:"Applicant Details"};l[t]&&s.push({label:l[t],path:"/".concat(e[0],"/dashboard/").concat(t),icon:"document"})}return s})();return 0===s.length?null:(0,l.jsx)("div",{className:"flex items-center gap-1 text-sm text-slate-600 mb-6",children:s.map((t,i)=>(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("button",{onClick:()=>e.push(t.path),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-200/50 hover:text-slate-900 transition-all duration-200 font-medium text-slate-700 hover:font-semibold",children:["home"===t.icon&&(0,l.jsx)(a.Z,{className:"w-4 h-4"}),t.label]}),i<s.length-1&&(0,l.jsx)(n.Z,{className:"w-4 h-4 text-slate-400"})]},t.path))})}},1119:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8470:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2009:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},1456:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[9066,1341,8985,2971,2117,1744],function(){return e(e.s=5716)}),_N_E=e.O()}]);