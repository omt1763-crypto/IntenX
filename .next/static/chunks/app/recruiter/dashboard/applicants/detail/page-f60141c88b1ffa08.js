(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3335],{8529:function(e,t,s){Promise.resolve().then(s.bind(s,129))},129:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ApplicantDetailPage}});var l=s(7437),a=s(2265),i=s(4033),n=s(4678),r=s(4102),d=s(907),o=s(4115),c=s(8144),h=s(8523);function ApplicantDetailPage(){var e,t,s;(0,i.useRouter)();let m=(0,i.useSearchParams)(),{user:u,isAuthenticated:x}=(0,n.useAuth)(),[p,b]=(0,a.useState)(null),[v,g]=(0,a.useState)(!0),[f,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),[y,k]=(0,a.useState)(!1),S=null==m?void 0:m.get("applicantId"),A=null==u?void 0:u.id;(0,a.useEffect)(()=>{j(!0),S&&A&&x&&loadInterviewData()},[S,A,x]);let loadInterviewData=async()=>{try{let e=await fetch("/api/interview-detail?applicantId=".concat(S)),t=await e.json();t.data?(b(t.data),k(!1),t.data.analysis?(N(t.data.analysis),console.log("[ApplicantDetail] Using stored AI analysis:",t.data.analysis)):(generateAssessment(t.data),console.log("[ApplicantDetail] No AI analysis found, generating assessment...")),console.log("[ApplicantDetail] Interview loaded:",t.data)):t.error&&(console.warn("[ApplicantDetail] No interview found:",t.error),k(!0),b(null))}catch(e){console.error("[ApplicantDetail] Error loading interview:",e),k(!0)}finally{g(!1)}},generateAssessment=e=>{var t,s,l,a;null===(t=e.conversation)||void 0===t||t.length;let i=(null===(s=e.skills)||void 0===s?void 0:s.length)||0;e.duration;let n=0,r=0,d=0,o=(null===(l=e.conversation)||void 0===l?void 0:l.filter(e=>"user"===e.role))||[],c=(null===(a=e.conversation)||void 0===a?void 0:a.filter(e=>"ai"===e.role||"assistant"===e.role))||[];console.log("[Assessment] User messages:",o.length,"AI messages:",c.length),o.length>8?r=80:o.length>5?r=60:o.length>2?r=40:o.length>0&&(r=20);let h=o.reduce((e,t)=>{var s;return e+((null===(s=t.content)||void 0===s?void 0:s.length)||0)},0)/Math.max(o.length,1);h>200?n=70:h>100?n=50:h>50?n=30:o.length>0&&(n=15),i>5?d=75:i>3?d=55:i>1?d=35:i>0&&(d=20);let m=Math.round((n+r+d)/3);N({jobSuitability:m,relevantAccomplishments:n,driveInitiative:r,problemSolving:d,cultureScopes:30,leadershipInfluence:25,userMessageCount:o.length,skillsCount:i,avgResponseLength:Math.round(h),summary:generateSummary(o.length,e),recommendation:m>50?"Consider for Interview":"Do Not Hire"})},generateSummary=(e,t)=>0===e?"Candidate ended interview immediately without engaging, demonstrating very low motivation and questionable professionalism.":e<3?"Candidate showed minimal engagement during the interview with very few responses. Limited information available to assess job-related competencies.":e<5?"Candidate demonstrated moderate engagement during the interview. Some substantive responses provided but needs further evaluation.":e<8?"Candidate demonstrated good engagement throughout the interview with multiple thoughtful responses. Shows competency in several areas.":"Candidate demonstrated strong engagement with consistent, detailed responses throughout the interview. Showed good understanding of role requirements and strong communication skills.",updateApplicantStatus=async e=>{if(S)try{g(!0);let t=await fetch("/api/applicants",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicantId:S,status:e})}),s=await t.json();t.ok?(console.log("[ApplicantDetail] Status updated to",e,s.applicant),await loadInterviewData()):console.error("[ApplicantDetail] Failed to update status",s)}catch(e){console.error("[ApplicantDetail] Error updating status:",e)}finally{g(!1)}};return f&&x?(0,l.jsxs)("main",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[(0,l.jsx)(r.Z,{role:"recruiter"}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto ml-64",children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-slate-200 shadow-sm",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)(d.Z,{}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:(null==p?void 0:p.name)||"Loading..."})]})}),(0,l.jsx)("div",{className:"p-6 max-w-6xl",children:v?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading interview data..."})]}):y?(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[(0,l.jsx)(o.Z,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Interview Found"}),(0,l.jsx)("p",{className:"text-slate-600 mb-6",children:"This applicant has not completed an interview yet."}),(0,l.jsx)("button",{onClick:()=>window.history.back(),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go Back"})]}):p?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Interview Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Applied For"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:p.position})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Interviewed On"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:new Date(p.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-4 h-4"}),"Email"]}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:p.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm text-slate-600 flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"w-4 h-4"}),"Interview Duration"]}),(0,l.jsx)("p",{className:"text-lg font-semibold text-slate-900",children:(e=p.duration,"".concat(Math.floor(e/60),"m ").concat(e%60,"s"))})]})]})]}),w&&(0,l.jsxs)("div",{className:"".concat((t=w.jobSuitability)>=70?"bg-green-50":t>=50?"bg-yellow-50":"bg-red-50"," rounded-lg border border-slate-200 p-6"),children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Job Suitability"}),(0,l.jsxs)("div",{className:"flex items-end gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-5xl font-bold ".concat((s=w.jobSuitability)>=70?"text-green-600":s>=50?"text-yellow-600":"text-red-600"),children:[w.jobSuitability,"%"]}),(0,l.jsxs)("p",{className:"text-sm text-slate-600 mt-2",children:[p.duration||0,"m interview"]})]}),(0,l.jsx)("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full transition-all ".concat(w.jobSuitability>=70?"bg-green-500":w.jobSuitability>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(w.jobSuitability,"%")}})})]})]}),w&&(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Assessment Breakdown"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Relevant Accomplishments"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[w.relevantAccomplishments,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-blue-500 transition-all",style:{width:"".concat(w.relevantAccomplishments,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Drive & Initiative"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[w.driveInitiative,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-green-500 transition-all",style:{width:"".concat(w.driveInitiative,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Problem Solving"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[w.problemSolving,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-purple-500 transition-all",style:{width:"".concat(w.problemSolving,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Culture & Scope Fit"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[w.cultureScopes,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-orange-500 transition-all",style:{width:"".concat(w.cultureScopes,"%")}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold text-slate-900",children:"Leadership & Influence"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-slate-900",children:[w.leadershipInfluence,"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-pink-500 transition-all",style:{width:"".concat(w.leadershipInfluence,"%")}})})]})]})]}),w&&(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,l.jsx)(o.Z,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"AI Summary"}),(0,l.jsx)("p",{className:"text-lg font-semibold mt-2 ".concat(w.jobSuitability>50?"text-green-600":"text-red-600"),children:w.recommendation})]})]}),(0,l.jsx)("p",{className:"text-slate-700 leading-relaxed",children:w.summary})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Qualitative Assessment"}),(0,l.jsx)("p",{className:"text-slate-600 mb-4 text-sm",children:"Interview analysis based on conversation and engagement during the interview session."}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Relevant Accomplishments"}),(0,l.jsx)("p",{className:"text-slate-700",children:(null==w?void 0:w.relevantAccomplishments)===0?"Insufficient data - Candidate provided minimal examples of relevant accomplishments.":"Candidate demonstrated relevant accomplishments aligned with position requirements."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Drive & Initiative"}),(0,l.jsx)("p",{className:"text-slate-700",children:(null==w?void 0:w.driveInitiative)<30?"Candidate demonstrated low engagement and willingness to participate in the interview.":"Candidate showed good engagement and initiative throughout the interview."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Problem Solving"}),(0,l.jsx)("p",{className:"text-slate-700",children:(null==w?void 0:w.problemSolving)===0?"Insufficient data - Not enough information to assess problem-solving skills.":"Candidate demonstrated ".concat((null==w?void 0:w.problemSolving)>50?"strong":"moderate"," problem-solving abilities.")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold text-slate-900 mb-2",children:"Areas To Explore"}),(0,l.jsxs)("ul",{className:"text-slate-700 space-y-2 list-disc list-inside",children:[(0,l.jsx)("li",{children:"Motivation and interest in the position"}),(0,l.jsx)("li",{children:"Relevant experience and background"}),(0,l.jsx)("li",{children:"Communication and professional conduct"}),(0,l.jsx)("li",{children:"Technical competencies for the role"})]})]})]})]}),"              ",(0,l.jsx)("div",{className:"flex gap-4 items-center",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>updateApplicantStatus("shortlisted"),disabled:v,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-60",children:"Shortlist"}),(0,l.jsx)("button",{onClick:()=>updateApplicantStatus("rejected"),disabled:v,className:"px-6 py-3 bg-slate-200 text-slate-900 rounded-lg font-semibold hover:bg-slate-300 transition-colors disabled:opacity-60",children:"Reject"})]})})]}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(o.Z,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-600 text-lg",children:"No interview data found"})]})})]})]}):null}},907:function(e,t,s){"use strict";s.d(t,{Z:function(){return DashboardBreadcrumb}});var l=s(7437),a=s(4033),i=s(160),n=s(4213);function DashboardBreadcrumb(){let e=(0,a.useRouter)(),t=(0,a.usePathname)();if("/candidate/dashboard"===t||"/recruiter/dashboard"===t||"/business/dashboard"===t)return null;let s=(()=>{let e=t.split("/").filter(Boolean);if(e.length<=2)return[];let s=[];if("candidate"===e[0]?s.push({label:"Dashboard",path:"/candidate/dashboard",icon:"home"}):"recruiter"===e[0]?s.push({label:"Dashboard",path:"/recruiter/dashboard",icon:"home"}):"business"===e[0]&&s.push({label:"Dashboard",path:"/business/dashboard",icon:"home"}),e.length>2){let t=e[2],l={practice:"Practice Types",skills:"Skills Map",resume:"Resume Analysis",certificates:"Certificates",profile:"My Profile",activity:"Activity",billing:"Billing",history:"Interview History",applicants:"Applicants",jobs:"Jobs",detail:"Applicant Details"};l[t]&&s.push({label:l[t],path:"/".concat(e[0],"/dashboard/").concat(t),icon:"document"})}return s})();return 0===s.length?null:(0,l.jsx)("div",{className:"flex items-center gap-1 text-sm text-slate-600 mb-6",children:s.map((t,a)=>(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("button",{onClick:()=>e.push(t.path),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-200/50 hover:text-slate-900 transition-all duration-200 font-medium text-slate-700 hover:font-semibold",children:["home"===t.icon&&(0,l.jsx)(i.Z,{className:"w-4 h-4"}),t.label]}),a<s.length-1&&(0,l.jsx)(n.Z,{className:"w-4 h-4 text-slate-400"})]},t.path))})}},6788:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var l=s(7865);let a=(0,l.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3731:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var l=s(7865);let a=(0,l.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},4213:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var l=s(7865);let a=(0,l.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8523:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var l=s(7865);let a=(0,l.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},160:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var l=s(7865);let a=(0,l.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},8144:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var l=s(7865);let a=(0,l.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[7653,9292,4102,2971,2472,1744],function(){return e(e.s=8529)}),_N_E=e.O()}]);