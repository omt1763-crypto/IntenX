(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9557],{98782:function(e,t,s){Promise.resolve().then(s.bind(s,29698))},29698:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var l=s(57437),a=s(2265),r=s(99376),n=s(1233),i=s(69358),c=s(18985),o=s(5795),d=s(38470),x=s(26680),m=s(46367),u=s(31338),h=s(72643),p=s(19150),b=s(8301);let f=(0,b.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var g=s(18512);let j=(0,b.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var v=s(17166),N=s(71456),w=s(67189);function y(){var e;let t=(0,r.useRouter)(),s=(0,r.useSearchParams)(),{user:b,isAuthenticated:y,isHydrated:k}=(0,n.a)(),{isOpen:Z}=(0,i.A)(),[C,S]=(0,a.useState)([]),[A,P]=(0,a.useState)([]),[L,I]=(0,a.useState)(!0),[_,E]=(0,a.useState)(!1),[z,U]=(0,a.useState)(new Set),[O,q]=(0,a.useState)(""),[D,R]=(0,a.useState)(""),[J,M]=(0,a.useState)(!1),F=null==b?void 0:b.id,H=s.get("jobId");(0,a.useEffect)(()=>{E(!0)},[]),(0,a.useEffect)(()=>{_&&k&&!b&&!J&&(localStorage.getItem("authState")?console.log("[ApplicantsPage] Auth data exists in localStorage, not redirecting"):(console.log("[ApplicantsPage] No authentication found, redirecting to login"),M(!0),t.push("/auth/login")))},[k,_,J,b]),(0,a.useEffect)(()=>{F&&_&&G()},[F,_,H]);let G=async()=>{try{if(!F)return;console.log("[ApplicantsPage] Loading applicants for recruiter:",F),console.log("[ApplicantsPage] Current filterJobId:",H);let e=await fetch("/api/get-applicants?recruiterId=".concat(F)),t=await e.json();if(console.log("[ApplicantsPage] API response:",t),t.data){console.log("[ApplicantsPage] Raw applicants data:",t.data),S(t.data);let e=T(t.data);console.log("[ApplicantsPage] Grouped by job:",e),P(e),H?(console.log("[ApplicantsPage] Filtering to show only jobId:",H),U(new Set([H]))):U(new Set(e.map(e=>e.job.id))),console.log("[ApplicantsPage] Applicants loaded:",t.data.length)}}catch(e){console.error("[ApplicantsPage] Error loading applicants:",e)}finally{I(!1)}},T=e=>{let t=e;H&&(t=e.filter(e=>e.job_id===H));let s={};return t.forEach(e=>{let t=e.job_id;if(!s[t]){var l,a,r;s[t]={job:{id:(null===(l=e.jobs)||void 0===l?void 0:l.id)||t,title:(null===(a=e.jobs)||void 0===a?void 0:a.title)||"Unknown Job",company:(null===(r=e.jobs)||void 0===r?void 0:r.company)||"Unknown Company"},applicants:[],expanded:!0}}s[t].applicants.push(e)}),Object.values(s).sort((e,t)=>e.job.title.localeCompare(t.job.title))},V=e=>{let t=new Set(z);t.has(e)?t.delete(e):t.add(e),U(t)},X=e=>{switch(e){case"completed":return(0,l.jsx)(o.Z,{className:"w-5 h-5 text-green-600"});case"in-progress":return(0,l.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"});case"rejected":return(0,l.jsx)(x.Z,{className:"w-5 h-5 text-red-600"});default:return(0,l.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600"})}},B=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},K=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Q=()=>A.reduce((e,t)=>e+t.applicants.length,0);if(!_)return null;if(!k)return(0,l.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,l.jsx)(c.Z,{role:"recruiter"}),(0,l.jsx)("div",{className:"flex-1 overflow-auto flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("p",{className:"text-slate-600 mt-4",children:"Loading..."})]})})]});if(!b)return null;let W=(()=>{let e={completed:0,"in-progress":0,rejected:0,pending:0};return C.forEach(t=>{e.hasOwnProperty(t.status)?e[t.status]++:e.pending++}),e})(),Y=A.map(e=>({...e,applicants:e.applicants.filter(e=>{let t=e.name.toLowerCase().includes(O.toLowerCase())||e.email.toLowerCase().includes(O.toLowerCase()),s=!D||e.status===D;return t&&s})})).filter(e=>e.applicants.length>0);return(0,l.jsxs)("main",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-50",children:[(0,l.jsx)(c.Z,{role:"recruiter"}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto transition-all duration-300 ".concat(Z?"ml-64":"ml-20"),children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)("button",{onClick:()=>t.push(H?"/recruiter/dashboard/jobs":"/recruiter/dashboard"),className:"p-2 hover:bg-slate-100 rounded-lg transition-all hover:scale-110 duration-200",children:(0,l.jsx)(m.Z,{className:"w-6 h-6 text-slate-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent flex items-center gap-3",children:[(0,l.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg",children:(0,l.jsx)(u.Z,{className:"w-8 h-8 text-blue-600"})}),H?"Job Applicants":"All Applicants"]}),(0,l.jsx)("p",{className:"text-slate-600 mt-2",children:H?"".concat(Q()," candidate").concat(1!==Q()?"s":""," for ").concat((null===(e=A[0])||void 0===e?void 0:e.job.title)||"this job"):"".concat(Q()," total candidates across ").concat(A.length," job").concat(1!==A.length?"s":"")})]})]}),C.length>0&&(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,l.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Completed"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-700",children:W.completed})]}),(0,l.jsx)(o.Z,{className:"w-8 h-8 text-green-600 opacity-30"})]})}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"In Progress"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:W["in-progress"]})]}),(0,l.jsx)(d.Z,{className:"w-8 h-8 text-blue-600 opacity-30"})]})}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4 border border-red-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-red-700",children:W.rejected})]}),(0,l.jsx)(x.Z,{className:"w-8 h-8 text-red-600 opacity-30"})]})}),(0,l.jsx)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4 border border-amber-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-amber-600 font-medium",children:"Pending"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-amber-700",children:W.pending})]}),(0,l.jsx)(h.Z,{className:"w-8 h-8 text-amber-600 opacity-30"})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:O,onChange:e=>q(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),(0,l.jsxs)("select",{value:D,onChange:e=>R(e.target.value),className:"px-4 py-3 rounded-lg border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all cursor-pointer",children:[(0,l.jsx)("option",{value:"",children:"All Status"}),(0,l.jsx)("option",{value:"completed",children:"Completed"}),(0,l.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,l.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),(0,l.jsx)("div",{className:"p-6",children:L?(0,l.jsxs)("div",{className:"text-center py-20",children:[(0,l.jsx)("div",{className:"inline-block",children:(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"})}),(0,l.jsx)("p",{className:"text-slate-600 mt-6 text-lg font-medium",children:"Loading applicants..."})]}):0!==Y.length||O||D||0!==A.length?0===Y.length?(0,l.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-slate-200 shadow-sm",children:[(0,l.jsx)(f,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-slate-900 text-lg font-semibold",children:"No results found"}),(0,l.jsx)("p",{className:"text-slate-600 text-sm mt-2",children:"Try adjusting your search or filter criteria"})]}):(0,l.jsx)("div",{className:"space-y-4",children:Y.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden",children:[(0,l.jsxs)("button",{onClick:()=>V(e.job.id),className:"w-full px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 to-transparent transition-all flex items-center justify-between border-b border-slate-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-1 text-left",children:[(0,l.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:(0,l.jsx)(g.Z,{className:"w-7 h-7 text-white"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:e.job.title}),(0,l.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.job.company})]}),(0,l.jsxs)("div",{className:"text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2 rounded-full shadow-md",children:[e.applicants.length," applicant",1!==e.applicants.length?"s":""]})]}),(0,l.jsx)("div",{className:"ml-4",children:z.has(e.job.id)?(0,l.jsx)(j,{className:"w-6 h-6 text-slate-400"}):(0,l.jsx)(v.Z,{className:"w-6 h-6 text-slate-400"})})]}),z.has(e.job.id)&&(0,l.jsx)("div",{className:"divide-y divide-slate-100",children:e.applicants.map((e,s)=>(0,l.jsx)("div",{className:"px-6 py-5 hover:bg-gradient-to-r hover:from-blue-50 to-transparent transition-all duration-150 group",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-300 to-slate-400 rounded-lg flex items-center justify-center flex-shrink-0 font-bold text-white text-sm",children:e.name.charAt(0).toUpperCase()}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("span",{className:"font-bold text-slate-900 text-base",children:e.name}),X(e.status)]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm text-slate-600 mt-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,l.jsx)(N.Z,{className:"w-4 h-4 flex-shrink-0 text-slate-400"}),(0,l.jsx)("a",{href:"mailto:".concat(e.email),className:"hover:text-blue-600 truncate font-medium",children:e.email})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"â€¢"}),(0,l.jsx)("span",{className:"font-medium text-slate-700",children:e.position_applied})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(w.Z,{className:"w-4 h-4 flex-shrink-0 text-slate-400"}),(0,l.jsx)("span",{className:"font-medium",children:K(e.created_at)})]})]})]})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.status&&(0,l.jsx)("span",{className:"px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ".concat(B(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1).replace("-"," ")}),(0,l.jsx)("button",{onClick:()=>t.push("/recruiter/dashboard/applicants/detail?applicantId=".concat(e.id)),className:"px-5 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-200 whitespace-nowrap shadow-md hover:shadow-lg hover:scale-105 active:scale-95",children:"View Details"})]})]})},e.id))})]},e.job.id))}):(0,l.jsxs)("div",{className:"text-center py-20 bg-white rounded-xl border-2 border-dashed border-slate-200 shadow-sm",children:[(0,l.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)(u.Z,{className:"w-8 h-8 text-blue-600"})}),(0,l.jsx)("p",{className:"text-slate-900 text-xl font-semibold",children:"No applicants yet"}),(0,l.jsx)("p",{className:"text-slate-600 text-sm mt-2",children:"Applicants will appear here when candidates apply for your jobs"})]})}),"      "]})]})}function k(){return(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,l.jsx)("p",{children:"Loading..."})}),children:(0,l.jsx)(y,{})})}},46367:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},67189:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5795:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},17166:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},38470:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},71456:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},19150:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},26680:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(8301).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[9066,1341,8985,2971,2117,1744],function(){return e(e.s=98782)}),_N_E=e.O()}]);